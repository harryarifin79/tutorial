<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="generator" content="Hexo 4.2.0"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><title>Install MongoDB Cluster - Tutorial</title><meta name="description" content="Cara Install MongoDB Sharded Cluster di CentOS 7Sharding adalah proses MongoDB untuk mengirim data-set melalui mesin yang berbeda. Dan mengizinkan untuk melakukan horizontal scale dari data, partisi d"><meta property="og:type" content="article"><meta property="og:title" content="Install MongoDB Cluster"><meta property="og:url" content="https://tutorial.getmedik.co.id/install-mongodb-cluster/index.html"><meta property="og:site_name" content="Tutorial"><meta property="og:description" content="Cara Install MongoDB Sharded Cluster di CentOS 7Sharding adalah proses MongoDB untuk mengirim data-set melalui mesin yang berbeda. Dan mengizinkan untuk melakukan horizontal scale dari data, partisi d"><meta property="og:locale" content="en_US"><meta property="og:image" content="https://tutorial.getmedik.co.id/images/og_image.png"><meta property="article:published_time" content="2020-03-02T04:00:33.191Z"><meta property="article:modified_time" content="2020-03-05T10:46:38.682Z"><meta property="article:author" content="GetMedik Team"><meta property="article:tag" content="MongoDB"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://tutorial.getmedik.co.id/images/og_image.png"><link rel="icon" href="//cdn.jsdelivr.net/gh/harryarifin79/tutorial@gh-pages/images/favicon.svg"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.7.2/css/bulma.css"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.4.1/css/all.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Ubuntu:400,600|Source+Code+Pro"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/outdatedbrowser@1.1.5/outdatedbrowser/outdatedbrowser.min.css"><link rel="stylesheet" href="//cdn.jsdelivr.net/gh/harryarifin79/tutorial@gh-pages/css/back-to-top.css"><link rel="stylesheet" href="//cdn.jsdelivr.net/gh/harryarifin79/tutorial@gh-pages/css/progressbar.css"><script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script><link rel="stylesheet" href="//cdn.jsdelivr.net/gh/harryarifin79/tutorial@gh-pages/css/style.css"></head><body class="is-3-column"><nav class="navbar navbar-main"><div class="container"><div class="navbar-brand is-flex-center"><a class="navbar-item navbar-logo" href="/"><img src="//cdn.jsdelivr.net/gh/harryarifin79/tutorial@gh-pages/images/logo.svg" alt="Install MongoDB Cluster" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a> <a class="navbar-item" href="/archives">Archives</a> <a class="navbar-item" href="/categories">Categories</a> <a class="navbar-item" href="/tags">Tags</a> <a class="navbar-item" href="/about">About</a></div><div class="navbar-end"><a class="navbar-item is-hidden-tablet catalogue" title="Catalogue" href="javascript:;"><i class="fas fa-list-ul"></i> </a><a class="navbar-item search" title="Search" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column is-8-tablet is-8-desktop is-6-widescreen has-order-2 column-main"><div class="card"><div class="card-content article"><div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto"><div class="level-left"><time class="level-item has-text-grey" datetime="2020-03-02T04:00:33.191Z">02-03-2020</time><div class="level-item"><a class="has-link-grey -link" href="/categories/Install/">Install</a></div><span class="level-item has-text-grey">7 minutes read (About 1058 words)</span></div></div><h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">Install MongoDB Cluster</h1><div class="content"><h2 id="Cara-Install-MongoDB-Sharded-Cluster-di-CentOS-7"><a href="#Cara-Install-MongoDB-Sharded-Cluster-di-CentOS-7" class="headerlink" title="Cara Install MongoDB Sharded Cluster di CentOS 7"></a><strong>Cara Install MongoDB Sharded Cluster di CentOS 7</strong></h2><p><strong>Sharding</strong> adalah proses MongoDB untuk mengirim data-set melalui mesin yang berbeda. Dan mengizinkan untuk melakukan horizontal scale dari data, partisi data melalui independent instances, dan dapat menjadi ‘Replica Sets’. Partisi Data-set di ‘Sharding’ menggunakan shard key. Sharding mengizinkan untuk menambah mesin lebih berdasarkan pertumbuhan data.</p><a id="more"></a><hr><h3 id="Sharding-dan-Replication"><a href="#Sharding-dan-Replication" class="headerlink" title="Sharding dan Replication"></a><strong>Sharding dan Replication</strong></h3><p>Secara sederhana. Ketika kamu punya koleksi musik, ‘Sharding’ akan menyimpan dan menjaga koleksi musikmu ke folder yang berbeda. ‘Replication,’ di sisi lain, hanya syncing koleksi musik kamu ke instances yang lain.</p><hr><p><strong>Tiga Sharding Komponen</strong></p><p><strong>Shard</strong> - Digunakan untuk menyimpan seluruh data, dan di linkungan production, masing-masing shard adalah replica sets. Menyediakan ketersediaan tinggi dan konsistensi data.</p><p><strong>Config Server</strong> - Digunakan untuk menyimpan cluster metadata, berisi pemetaan dari cluster data set dan shards. Data ini digunakan oleh server mongos/query untuk mengirim operations. Disarankan untuk menggunakan lebih dari 3 instances in production.<br><strong>Mongos/Query Router</strong> - Ini hanya mongo instances berjalan sebagai application interfaces. Aplikasi akan membuat requests ke mongos instances, dan kemudian mongos akan mengirim requests menggunakan shard key untuk memecah ke replica sets.<br><strong><center>Prerequisites</center></strong></p><ul><li><strong>3 centOS 7 server as Config, Shard, and Mongos/Query Router</strong><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">192.168.88.100      mongod1</span><br><span class="line">192.168.88.101      mongod2</span><br><span class="line">192.168.88.102      mongod3</span><br></pre></td></tr></table></figure></li><li><strong>PORT</strong><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">27017  mongos&#x2F;Query</span><br><span class="line">27018  Config Replica Set</span><br><span class="line">27019  Shard1 Replica Set</span><br><span class="line">27020  Shard2 Replica Set</span><br></pre></td></tr></table></figure></li><li><strong>Root privileges</strong></li><li><strong>Each server connected to another server</strong></li></ul><p><strong>Step 1 - Disable SELinux dan Configure Hosts</strong><br>Untuk tutorial ini, kita akan disable SELinux. Ganti konfigurasi SELinux dari <code>&#39;enforcing&#39;</code> ke <code>&#39;disabled&#39;</code>.<br>Connect ke semua nodes melalui OpenSSH.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh root@SERVERIP</span><br></pre></td></tr></table></figure><p>Disable SELinux dengan perintah sebagai berikut.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim &#x2F;etc&#x2F;sysconfig&#x2F;selinux</span><br></pre></td></tr></table></figure><p>Ganti SELinux menjadi ‘disabled’.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELINUX&#x3D;disabled</span><br></pre></td></tr></table></figure><p>Save dan exit.<br>Berikutnya, edit hosts file di masing-masing server.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim &#x2F;etc&#x2F;hosts</span><br></pre></td></tr></table></figure><p>ikuti konfigurasi hosts sebagai berikut:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">192.168.88.100      mongod1</span><br><span class="line">192.168.88.101      mongod2</span><br><span class="line">192.168.88.102      mongod3</span><br></pre></td></tr></table></figure><p>Save dan exit.<br>Sekarang <code>restart</code> semua server</p><p><strong>Step 2 - Install MongoDB di semua Server</strong></p><p>Kita akan menggunakan latest MongoDB (MongoDB 4.2) untuk semua instances. Tambah repositori baru MongoDB dengan perintah sebagai berikut:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">cat &lt;&lt;&#39;EOF&#39; &gt;&gt; &#x2F;etc&#x2F;yum.repos.d&#x2F;mongodb.repo</span><br><span class="line">[mongodb-org-4.2]</span><br><span class="line">name&#x3D;MongoDB Repository</span><br><span class="line">baseurl&#x3D;https:&#x2F;&#x2F;repo.mongodb.org&#x2F;yum&#x2F;redhat&#x2F;$releasever&#x2F;mongodb-org&#x2F;4.2&#x2F;x86_64&#x2F;</span><br><span class="line">gpgcheck&#x3D;1</span><br><span class="line">enabled&#x3D;1</span><br><span class="line">gpgkey&#x3D;https:&#x2F;&#x2F;www.mongodb.org&#x2F;static&#x2F;pgp&#x2F;server-4.2.asc</span><br><span class="line">EOF</span><br></pre></td></tr></table></figure><p>Sekarang install mongodb 4.2 dari repositori mongodb menggunakan perintah yum seperti perintah dibawah.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo yum -y install mongodb-org</span><br></pre></td></tr></table></figure><p>Setelah mongodb is terinstall, gunakan perintah ‘mongo’ atau ‘mongod’seperti berikut untuk melihat versi.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mongod --version</span><br></pre></td></tr></table></figure><p>Install MongoDB di semua Instances<br><strong>Step 3 - Create Config, Shard Server Replica Sets and Mongos/Query di setiap Server</strong><br>Pada bagian syarat, kita telah menetapkan server config dengan 3 mesin dengan <code>&#39;configsvr&#39;</code>. Dan di langkah ini, kita akan konfigurasikan ke replica set.<br>Jika ada service mongod yang jalan di server, stop dengan perintah systemctl sebagai berikut.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">systemctl stop mongod</span><br><span class="line">systemctl disable mongod</span><br></pre></td></tr></table></figure><p>copy mongod.conf</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">cp &#x2F;etc&#x2F;mongod.conf &#x2F;home&#x2F;mongoconfig.conf</span><br><span class="line">cp &#x2F;etc&#x2F;mongod.conf &#x2F;home&#x2F;shard1.conf</span><br><span class="line">cp &#x2F;etc&#x2F;mongod.conf &#x2F;home&#x2F;shard2.conf</span><br><span class="line">cp &#x2F;etc&#x2F;mongod.conf &#x2F;home&#x2F;mongos.conf</span><br></pre></td></tr></table></figure><p><strong>buka mongodb configuration ‘mongoconfig.conf’.</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim &#x2F;home&#x2F;mongoconfig.conf</span><br></pre></td></tr></table></figure><p>Change DB storage path to your own directory. We will use ‘/mongodb/mongoconfig/‘.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">systemLog:</span><br><span class="line">  destination: file</span><br><span class="line">  logAppend: true</span><br><span class="line">  path: &#x2F;mongodb&#x2F;mongoconfig&#x2F;log&#x2F;configsvr.log</span><br><span class="line">storage:</span><br><span class="line">   dbPath: &#x2F;mongodb&#x2F;mongoconfig&#x2F;data</span><br><span class="line">net:</span><br><span class="line">  port: 27018</span><br><span class="line">bindIP: 192.168.88.100,127.0.0.1</span><br><span class="line">replication:</span><br><span class="line">   replSetName: &quot;rs0&quot;</span><br><span class="line">sharding:</span><br><span class="line">   clusterRole: configsvr</span><br></pre></td></tr></table></figure><p>Save dan exit.<br><strong>open mongodb configuration ‘shard1.conf’.</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim &#x2F;home&#x2F;shard1.conf</span><br></pre></td></tr></table></figure><p>Rubah penempatan DB. Kami menggunakan <code>/mongodb/shard1/</code>.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">systemLog:</span><br><span class="line">  destination: file</span><br><span class="line">  logAppend: true</span><br><span class="line">  path: &#x2F;mongodb&#x2F;shard&#x2F;log&#x2F;shard1.log</span><br><span class="line">storage:</span><br><span class="line">   dbPath: &#x2F;mongodb&#x2F;shard&#x2F;shard1&#x2F;data</span><br><span class="line">net:</span><br><span class="line">  port: 27019</span><br><span class="line">bindIP: 192.168.88.100,127.0.0.1</span><br><span class="line">replication:</span><br><span class="line">   replSetName: &quot;rs1&quot;</span><br><span class="line">sharding:</span><br><span class="line">   clusterRole: shardsvr</span><br></pre></td></tr></table></figure><p>Save dan exit.</p><p><strong>buka mongodb configuration ‘shard2.conf’.</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim &#x2F;home&#x2F;shard2.conf</span><br></pre></td></tr></table></figure><p>Rubah penempatan DB. Kami menggunakan <code>/mongodb/shard2/</code>.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">systemLog:</span><br><span class="line">  destination: file</span><br><span class="line">  logAppend: true</span><br><span class="line">  path: &#x2F;mongodb&#x2F;shard&#x2F;log&#x2F;shard2.log</span><br><span class="line">storage:</span><br><span class="line">   dbPath: &#x2F;mongodb&#x2F;shard&#x2F;shard2&#x2F;data</span><br><span class="line">net:</span><br><span class="line">  port: 27020</span><br><span class="line">bindIP: 192.168.88.100,127.0.0.1</span><br><span class="line">replication:</span><br><span class="line">   replSetName: &quot;rs2&quot;</span><br><span class="line">sharding:</span><br><span class="line">   clusterRole: shardsvr</span><br></pre></td></tr></table></figure><p>Save and exit.<br><strong>Buka mongodb configuration ‘mongos.conf’.</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim &#x2F;home&#x2F;mongos.conf</span><br></pre></td></tr></table></figure><p>Rubah penempatan log file. Nonaktifkan (beri tanda command) di <strong>storage</strong> dan <strong>replication</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">systemLog:</span><br><span class="line">  destination: file</span><br><span class="line">  logAppend: true</span><br><span class="line">  path: &#x2F;mongodb&#x2F;mongos&#x2F;log&#x2F;mongos.log</span><br><span class="line">net:</span><br><span class="line">  port: 27017</span><br><span class="line">bindIP: 192.168.88.100,127.0.0.1</span><br><span class="line">sharding:</span><br><span class="line">   configDB: rs0&#x2F;192.168.88.100:27018,192.168.88.101:27018,192.168.88.102:27018</span><br></pre></td></tr></table></figure><p>Save and exit.</p><p><strong>Create Folder</strong><br>Berikut, kita harus membuat direktori baru untuk data MongoDB, dan kemudian ganti permisi kepemilikan dari direktori ke user ‘mongod’.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p &#x2F;mongodb&#x2F;mongoconfig&#x2F;log</span><br><span class="line">mkdir -p &#x2F;mongodb&#x2F;mongoconfig&#x2F;data</span><br><span class="line">mkdir -p &#x2F;mongodb&#x2F;shard&#x2F;log</span><br><span class="line">mkdir -p &#x2F;mongodb&#x2F;shard&#x2F;shard1&#x2F;data</span><br><span class="line">mkdir -p &#x2F;mongodb&#x2F;shard&#x2F;shard2&#x2F;data</span><br><span class="line">mkdir -p &#x2F;mongodb&#x2F;mongos&#x2F;log&#x2F;mongos.log</span><br><span class="line">chown -R mongod:mongod &#x2F;mongodb&#x2F;mongoconfig&#x2F;log</span><br><span class="line">chown -R mongod:mongod &#x2F;mongodb&#x2F;mongoconfig&#x2F;data</span><br><span class="line">chown -R mongod:mongod &#x2F;mongodb&#x2F;shard&#x2F;log</span><br><span class="line">chown -R mongod:mongod &#x2F;mongodb&#x2F;shard&#x2F;shard1&#x2F;data</span><br><span class="line">chown -R mongod:mongod &#x2F;mongodb&#x2F;shard&#x2F;shard2&#x2F;data</span><br><span class="line">chown -R mongod:mongod &#x2F;mongodb&#x2F;mongos&#x2F;log&#x2F;mongos.log</span><br></pre></td></tr></table></figure><p>Berikut, mulai service mongod dengan perintah berikut.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mongod --config &#x2F;home&#x2F;mongoconfig.conf</span><br><span class="line">mongod --config &#x2F;home&#x2F;shard1.conf</span><br><span class="line">mongod --config &#x2F;home&#x2F;shard2.conf</span><br><span class="line">mongos --config &#x2F;home&#x2F;mongos.conf</span><br></pre></td></tr></table></figure><p>Anda bisa melihat service mongod sedang berjalan dengan perintah netstat.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">netstat -plntu</span><br></pre></td></tr></table></figure><p><strong>Ulangi langkah ini di semua server</strong></p><p><strong>Step 4 - Initiate member on all mongod</strong></p><p><strong>Menambah Config Server in Replica Set</strong></p><p>Configsvr siap untuk replica set. Connect ke server ‘mongod1’ dan akses ke mongo shell.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ssh root@mongod1</span><br><span class="line">mongo --port 27018</span><br></pre></td></tr></table></figure><p>Initiate nama replica set dengan semua anggota configsvr menggunakan query berikut.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">rs.initiate()</span><br><span class="line">rs.add(&quot;192.168.88.101:27018&quot;)</span><br><span class="line">rs.add(&quot;192.168.88.102:27018&quot;)</span><br></pre></td></tr></table></figure><p>Jika mendapatkan hasil’{ “ok” : 1 }’, itu berarti configsvr telah terkonfigurasi dengan replica set.<br>Initiate nama replica set dengan semua anggota configsvr<br>dan kamu akan dapat melihat yang mana node master dan yang mana node secondary.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rs.status()</span><br></pre></td></tr></table></figure><p>Konfigurasi dari Server Config Replika set telah selesai.</p><p>konfigurasi dari Server Config Replica Set</p><h5 id="Add-Shard-Server-in-Replica-Set"><a href="#Add-Shard-Server-in-Replica-Set" class="headerlink" title="Add Shard Server in Replica Set"></a><strong>Add Shard Server in Replica Set</strong></h5><p>Shard1 and Shard2 telah siap untuk replica set. Connect menuju server <strong>‘mongod1’</strong> dan akses ke mongo shell.</p><figure class="highlight plain"><figcaption><span>--port 27019```</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">Initiate nama replica set dengan semua anggota Shard1 menggunakan query berikut.</span><br></pre></td></tr></table></figure><p>rs.initiate()<br>rs.add(“192.168.88.101:27019”)<br>rs.add(“192.168.88.102:27019”)<br>rs.status()<br>exit</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#96;&#96;&#96;mongo --port 27020</span><br></pre></td></tr></table></figure><p>Initiate nama replica set dengan semua anggota Shard2 menggunakan query berikut.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">rs.initiate()</span><br><span class="line">rs.add(&quot;192.168.88.101:27020&quot;)</span><br><span class="line">rs.add(&quot;192.168.88.102:27020&quot;)</span><br><span class="line">rs.status()</span><br><span class="line">exit</span><br></pre></td></tr></table></figure><p>Jika mendapatkan hasil’{ “ok” : 1 }’, itu berarti Shard telah terkonfigurasi dengan replica set.<br>Initiate nama replica set dengan semua anggota Shards dan kamu akan dapat melihat yang mana node master dan yang mana node secondary.</p><p>Konfigurasi dari server Config telah selesai.</p><p>Konfigurasi dari Server Shard Replica Set</p><h5 id="Tambah-Anggota-Mongos"><a href="#Tambah-Anggota-Mongos" class="headerlink" title="Tambah Anggota Mongos"></a><strong>Tambah Anggota Mongos</strong></h5><p><strong>Konfigurasi mongos/Query Router</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">mongo --port 27017</span><br><span class="line"></span><br><span class="line">sh.addShard( &quot;rs1&#x2F;192.168.88.100:27019,192.168.88.101:27019,192.168.88.102:27019&quot;)</span><br><span class="line">sh.addShard( &quot;rs1&#x2F;192.168.88.100:27020,192.168.88.101:27020,192.168.88.102:27020&quot;)</span><br><span class="line">sh.status()</span><br></pre></td></tr></table></figure><p>MongoDB sharded cluster di CentOS 7 sukses terinstal.</p><p>reff<br><a href="https://www.howtoforge.com/tutorial/install-a-mongodb-sharded-cluster-on-centos-7/" target="_blank" target="_blank" target="_blank" target="_blank" rel="external nofollow noopener noreferrer">Howtoforge</a><br><a href="https://docs.mongodb.com/manual/tutorial/install-mongodb-on-red-hat/" target="_blank" target="_blank" target="_blank" target="_blank" rel="external nofollow noopener noreferrer">MongoDB</a></p></div><div class="level is-size-7 is-uppercase"><div class="level-start"><div class="level-item"><span class="is-size-6 has-text-grey has-mr-7">#</span> <a class="has-link-grey -link" href="/tags/MongoDB/" rel="tag">MongoDB</a></div></div></div></div></div><div class="card card-transparent"><div class="level post-navigation is-flex-wrap is-mobile"><div class="level-start"><a class="level level-item has-link-grey article-nav-prev" href="/install-ops-manager/"><i class="level-item fas fa-chevron-left"></i> <span class="level-item">Install OpsManager MongoDb</span></a></div><div class="level-end"><a class="level level-item has-link-grey article-nav-next" href="/how-to-install-fail2ban-zimbra/"><span class="level-item">Cara install fail2ban zimbra</span> <i class="level-item fas fa-chevron-right"></i></a></div></div></div></div><div class="column is-4-tablet is-4-desktop is-3-widescreen has-order-1 column-left"><div class="card widget"><div class="card-content"><nav class="level"><div class="level-item has-text-centered" style="flex-shrink:1"><div><figure class="image is-128x128 has-mb-6"><img class="is-rounded" src="//cdn.jsdelivr.net/gh/harryarifin79/tutorial@gh-pages/images/avatar.png" alt="GetMedik"></figure><p class="is-size-4 is-block">GetMedik</p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">Posts</p><a href="/archives"><p class="title has-text-weight-normal">9</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Categories</p><a href="/categories"><p class="title has-text-weight-normal">2</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Tags</p><a href="/tags"><p class="title has-text-weight-normal">2</p></a></div></div></nav><div class="level"><a class="level-item button is-link is-rounded" href="https://tutorial.getmedik.co.id" target="_blank" rel="noopener">Follow</a></div></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">Links</h3><ul class="menu-list"><li><a class="level is-mobile" href="https://tutorial.getmedik.co.id" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Tutorial</span> </span><span class="level-right"><span class="level-item tag">tutorial.getmedik.co.id</span></span></a></li><li><a class="level is-mobile" href="http://getmedik.co.id" target="_blank" target="_blank" target="_blank" target="_blank" rel="noopener external nofollow noopener noreferrer"><span class="level-left"><span class="level-item">GetMedik</span> </span><span class="level-right"><span class="level-item tag">getmedik.co.id</span></span></a></li></ul></div></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">Categories</h3><ul class="menu-list"><li><a class="level is-marginless" href="/categories/HowTo/"><span class="level-start"><span class="level-item">HowTo</span> </span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-marginless" href="/categories/Install/"><span class="level-start"><span class="level-item">Install</span> </span><span class="level-end"><span class="level-item tag">4</span></span></a></li></ul></div></div></div><div class="card widget"><div class="card-content"><h3 class="menu-label">Tag Cloud</h3><a href="/tags/MongoDB/" style="font-size:10px">MongoDB</a> <a href="/tags/Zimbra/" style="font-size:20px">Zimbra</a></div></div><div class="column-right-shadow is-hidden-widescreen"><div class="card widget" id="toc"><div class="card-content"><div class="menu"><h3 class="menu-label">Catalogue</h3><ul class="menu-list"><li><a class="is-flex" href="#Cara-Install-MongoDB-Sharded-Cluster-di-CentOS-7"><span class="has-mr-6">1</span> <span>Cara Install MongoDB Sharded Cluster di CentOS 7</span></a><ul class="menu-list"><li><a class="is-flex" href="#Sharding-dan-Replication"><span class="has-mr-6">1.1</span> <span>Sharding dan Replication</span></a><ul class="menu-list"><li><a class="is-flex" href="#Add-Shard-Server-in-Replica-Set"><span class="has-mr-6">1.1.1</span> <span>Add Shard Server in Replica Set</span></a></li><li><a class="is-flex" href="#Tambah-Anggota-Mongos"><span class="has-mr-6">1.1.2</span> <span>Tambah Anggota Mongos</span></a></li></ul></li></ul></li></ul></div></div></div><div class="card widget"><div class="card-content"><h3 class="menu-label">Recent</h3><article class="media"><div class="media-content"><div class="content"><div><time class="has-text-grey is-size-7 is-uppercase" datetime="2020-03-04T05:43:23.612Z">04-03-2020</time></div><a href="/mengatasi-link-forgot-password-tidak-muncul-pada-login-screen-zimbra/" class="title has-link-black-ter is-size-6 has-text-weight-normal">Mengatasi Link Forgot Password Zimbra Yang Tidak Muncul</a><p class="is-size-7 is-uppercase"><a class="has-link-grey -link" href="/categories/HowTo/">HowTo</a></p></div></div></article><article class="media"><div class="media-content"><div class="content"><div><time class="has-text-grey is-size-7 is-uppercase" datetime="2020-03-04T05:33:53.808Z">04-03-2020</time></div><a href="/cara-menggunakan-fitur-forgot-password/" class="title has-link-black-ter is-size-6 has-text-weight-normal">Cara Menggunakan Fitur Forgot Password Zimbra</a><p class="is-size-7 is-uppercase"><a class="has-link-grey -link" href="/categories/HowTo/">HowTo</a></p></div></div></article><article class="media"><div class="media-content"><div class="content"><div><time class="has-text-grey is-size-7 is-uppercase" datetime="2020-03-03T04:40:09.734Z">03-03-2020</time></div><a href="/how-to-activate-forgot-password/" class="title has-link-black-ter is-size-6 has-text-weight-normal">Cara Aktifasi Fitur Forgot Password Zimbra</a><p class="is-size-7 is-uppercase"><a class="has-link-grey -link" href="/categories/HowTo/">HowTo</a></p></div></div></article><article class="media"><div class="media-content"><div class="content"><div><time class="has-text-grey is-size-7 is-uppercase" datetime="2020-03-02T04:00:35.836Z">02-03-2020</time></div><a href="/zimbra-command/" class="title has-link-black-ter is-size-6 has-text-weight-normal">Check Zimbra Mail Server</a><p class="is-size-7 is-uppercase"><a class="has-link-grey -link" href="/categories/Install/">Install</a></p></div></div></article><article class="media"><div class="media-content"><div class="content"><div><time class="has-text-grey is-size-7 is-uppercase" datetime="2020-03-02T04:00:35.017Z">02-03-2020</time></div><a href="/install-zimbra/" class="title has-link-black-ter is-size-6 has-text-weight-normal">Install Zimbra Mail Server</a><p class="is-size-7 is-uppercase"><a class="has-link-grey -link" href="/categories/Install/">Install</a></p></div></div></article></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">Archives</h3><ul class="menu-list"><li><a class="level is-marginless" href="/archives/2020/03/"><span class="level-start"><span class="level-item">March 2020</span> </span><span class="level-end"><span class="level-item tag">8</span></span></a></li><li><a class="level is-marginless" href="/archives/2020/01/"><span class="level-start"><span class="level-item">January 2020</span> </span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></div></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">Tags</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/MongoDB/"><span class="tag">MongoDB</span> <span class="tag is-grey">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Zimbra/"><span class="tag">Zimbra</span> <span class="tag is-grey">7</span></a></div></div></div></div></div></div></div><div class="column is-4-tablet is-4-desktop is-3-widescreen is-hidden-touch is-hidden-desktop-only has-order-3 column-right"><div class="card widget" id="toc"><div class="card-content"><div class="menu"><h3 class="menu-label">Catalogue</h3><ul class="menu-list"><li><a class="is-flex" href="#Cara-Install-MongoDB-Sharded-Cluster-di-CentOS-7"><span class="has-mr-6">1</span> <span>Cara Install MongoDB Sharded Cluster di CentOS 7</span></a><ul class="menu-list"><li><a class="is-flex" href="#Sharding-dan-Replication"><span class="has-mr-6">1.1</span> <span>Sharding dan Replication</span></a><ul class="menu-list"><li><a class="is-flex" href="#Add-Shard-Server-in-Replica-Set"><span class="has-mr-6">1.1.1</span> <span>Add Shard Server in Replica Set</span></a></li><li><a class="is-flex" href="#Tambah-Anggota-Mongos"><span class="has-mr-6">1.1.2</span> <span>Tambah Anggota Mongos</span></a></li></ul></li></ul></li></ul></div></div></div><div class="card widget"><div class="card-content"><h3 class="menu-label">Recent</h3><article class="media"><div class="media-content"><div class="content"><div><time class="has-text-grey is-size-7 is-uppercase" datetime="2020-03-04T05:43:23.612Z">04-03-2020</time></div><a href="/mengatasi-link-forgot-password-tidak-muncul-pada-login-screen-zimbra/" class="title has-link-black-ter is-size-6 has-text-weight-normal">Mengatasi Link Forgot Password Zimbra Yang Tidak Muncul</a><p class="is-size-7 is-uppercase"><a class="has-link-grey -link" href="/categories/HowTo/">HowTo</a></p></div></div></article><article class="media"><div class="media-content"><div class="content"><div><time class="has-text-grey is-size-7 is-uppercase" datetime="2020-03-04T05:33:53.808Z">04-03-2020</time></div><a href="/cara-menggunakan-fitur-forgot-password/" class="title has-link-black-ter is-size-6 has-text-weight-normal">Cara Menggunakan Fitur Forgot Password Zimbra</a><p class="is-size-7 is-uppercase"><a class="has-link-grey -link" href="/categories/HowTo/">HowTo</a></p></div></div></article><article class="media"><div class="media-content"><div class="content"><div><time class="has-text-grey is-size-7 is-uppercase" datetime="2020-03-03T04:40:09.734Z">03-03-2020</time></div><a href="/how-to-activate-forgot-password/" class="title has-link-black-ter is-size-6 has-text-weight-normal">Cara Aktifasi Fitur Forgot Password Zimbra</a><p class="is-size-7 is-uppercase"><a class="has-link-grey -link" href="/categories/HowTo/">HowTo</a></p></div></div></article><article class="media"><div class="media-content"><div class="content"><div><time class="has-text-grey is-size-7 is-uppercase" datetime="2020-03-02T04:00:35.836Z">02-03-2020</time></div><a href="/zimbra-command/" class="title has-link-black-ter is-size-6 has-text-weight-normal">Check Zimbra Mail Server</a><p class="is-size-7 is-uppercase"><a class="has-link-grey -link" href="/categories/Install/">Install</a></p></div></div></article><article class="media"><div class="media-content"><div class="content"><div><time class="has-text-grey is-size-7 is-uppercase" datetime="2020-03-02T04:00:35.017Z">02-03-2020</time></div><a href="/install-zimbra/" class="title has-link-black-ter is-size-6 has-text-weight-normal">Install Zimbra Mail Server</a><p class="is-size-7 is-uppercase"><a class="has-link-grey -link" href="/categories/Install/">Install</a></p></div></div></article></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">Archives</h3><ul class="menu-list"><li><a class="level is-marginless" href="/archives/2020/03/"><span class="level-start"><span class="level-item">March 2020</span> </span><span class="level-end"><span class="level-item tag">8</span></span></a></li><li><a class="level is-marginless" href="/archives/2020/01/"><span class="level-start"><span class="level-item">January 2020</span> </span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></div></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">Tags</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/MongoDB/"><span class="tag">MongoDB</span> <span class="tag is-grey">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Zimbra/"><span class="tag">Zimbra</span> <span class="tag is-grey">7</span></a></div></div></div></div></div></div></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start has-text-centered-mobile"><a class="footer-logo is-block has-mb-6" href="/"><img src="//cdn.jsdelivr.net/gh/harryarifin79/tutorial@gh-pages/images/logo.svg" alt="Install MongoDB Cluster" height="28"></a><p class="is-size-7">&copy; 2020 Harry&nbsp; Powered by <a href="http://getmedik.co.id/" target="_blank" target="_blank" target="_blank" rel="noopener external nofollow noopener noreferrer">Getmedik</a></p></div><div class="level-end"></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script>moment.locale("en")</script><script>var IcarusThemeSettings={site:{url:"https://tutorial.getmedik.co.id",external_link:{enable:!0,exclude:[]}},article:{highlight:{clipboard:!0,fold:"unfolded"}}}</script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script src="//cdn.jsdelivr.net/gh/harryarifin79/tutorial@gh-pages/js/animation.js"></script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script><script src="//cdn.jsdelivr.net/gh/harryarifin79/tutorial@gh-pages/js/gallery.js" defer></script><div id="outdated"><h6>Your browser is out-of-date!</h6><p>Update your browser to view this website correctly. <a id="btnUpdateBrowser" href="http://outdatedbrowser.com/" target="_blank" target="_blank" target="_blank" rel="external nofollow noopener noreferrer">Update my browser now</a></p><p class="last"><a href="#" id="btnCloseUpdateBrowser" title="Close">&times;</a></p></div><script src="https://cdn.jsdelivr.net/npm/outdatedbrowser@1.1.5/outdatedbrowser/outdatedbrowser.min.js" defer></script><script>document.addEventListener("DOMContentLoaded",function(){outdatedBrowser({bgColor:"#f25648",color:"#ffffff",lowerThan:"flex"})})</script><script src="https://cdn.jsdelivr.net/npm/mathjax@2.7.5/unpacked/MathJax.js?config=TeX-MML-AM_CHTML" defer></script><script>document.addEventListener("DOMContentLoaded",function(){MathJax.Hub.Config({"HTML-CSS":{matchFontHeight:!1},SVG:{matchFontHeight:!1},CommonHTML:{matchFontHeight:!1},tex2jax:{inlineMath:[["$","$"],["\\(","\\)"]]}})})</script><a id="back-to-top" title="Back to Top" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="//cdn.jsdelivr.net/gh/harryarifin79/tutorial@gh-pages/js/back-to-top.js" defer></script><script src="//cdn.jsdelivr.net/gh/harryarifin79/tutorial@gh-pages/js/main.js" defer></script><div class="searchbox ins-search"><div class="searchbox-container ins-search-container"><div class="searchbox-input-wrapper"><input type="text" class="searchbox-input ins-search-input" placeholder="Type something..."> <span class="searchbox-close ins-close ins-selectable"><i class="fa fa-times-circle"></i></span></div><div class="searchbox-result-wrapper ins-section-wrapper"><div class="ins-section-container"></div></div></div></div><script>window.INSIGHT_CONFIG={TRANSLATION:{POSTS:"Posts",PAGES:"Pages",CATEGORIES:"Categories",TAGS:"Tags",UNTITLED:"(Untitled)"},CONTENT_URL:"/content.json"}</script><script src="//cdn.jsdelivr.net/gh/harryarifin79/tutorial@gh-pages/js/insight.js" defer></script><link rel="stylesheet" href="//cdn.jsdelivr.net/gh/harryarifin79/tutorial@gh-pages/css/search.css"><link rel="stylesheet" href="//cdn.jsdelivr.net/gh/harryarifin79/tutorial@gh-pages/css/insight.css"></body></html>