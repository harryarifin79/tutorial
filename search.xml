<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>Mengatasi Link Forgot Password Zimbra Yang Tidak Muncul</title>
      <link href="/mengatasi-link-forgot-password-tidak-muncul-pada-login-screen-zimbra/"/>
      <url>/mengatasi-link-forgot-password-tidak-muncul-pada-login-screen-zimbra/</url>
      
        <content type="html"><![CDATA[<p>Beberapa hari yang lalu Zimbra telah mengeluarkan Zimbra versi terbaru 8.8.9, dan untuk saat ini pun versi tersebut sudah ada Patch 4 nya. Kemudian salah 1 fitur terbaru yang ada pada zimbra 8.8.9 yaitu adanya fitur Forgot Password. Fitur ini ada pada saat Patch 1 diluncurkan oleh zimbra dan saat itu statusnya pun masih Beta.</p><a id="more"></a><p>Pada saat masih Patch 1, saya coba mengaktifkan fitur Forgot Password tersebut dan berhasil, ditandakan dengan adanya Link Forgot Password yang muncul pada tampilan Login Screen Zimbra. Untuk panduan enable Forgot Password tersebut, bisa lihat di artikel saya sebelumnya.</p><ul><li><a href="https://tutorial.getmedik.co.id/how-to-activate-forgot-password/">Enable Fitur Forgot Password pada Zimbra</a></li></ul><p>Kemudian ketika Patch 4 hadir, saya coba update dan ternyata setelah update tersebut, Link Forgot Password yang sebelumnya muncul di Login Screen, tiba-tiba tidak muncul. Saya pun coba ulangi command-command untuk enable fitur tersebut, namun hasilnya nihil. Tetap tidak muncul</p><p>Akhirnya saya mencari dan ketemu link ini <a href="https://rizkypratama.id/blog/2018/09/06/mengatasi-link-forgot-password-tidak-muncul-pada-login-screen-zimbra-8-8-9-patch-4/" target="_blank" rel="external nofollow noopener noreferrer">https://rizkypratama.id/blog/2018/09/06/mengatasi-link-forgot-password-tidak-muncul-pada-login-screen-zimbra-8-8-9-patch-4/</a>, katanya untuk hal itu bisa di edit dari sisi file login.jsp</p><p>Note : (Update) Artikel ini juga bisa digunakan untuk Zimbra Versi 8.8.9 keatas</p><p>Berikut langkah-langkah nya</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">Edit file &#x2F;opt&#x2F;zimbra&#x2F;jetty&#x2F;webapps&#x2F;zimbra&#x2F;public&#x2F;login.jsp</span><br><span class="line">vi &#x2F;opt&#x2F;zimbra&#x2F;jetty&#x2F;webapps&#x2F;zimbra&#x2F;public&#x2F;login.jsp</span><br><span class="line">Cari baris berikut ini</span><br><span class="line">&lt;c:if test&#x3D;&quot;$&#123;domainInfo.attrs.zimbraFeatureResetPasswordStatus eq &#39;enabled&#39;&#125;&quot;&gt;</span><br><span class="line">Nanti akan terlihat script seperti berikut ini</span><br><span class="line">&lt;c:if test&#x3D;&quot;$&#123;domainInfo.attrs.zimbraFeatureResetPasswordStatus eq &#39;enabled&#39;&#125;&quot;&gt;</span><br><span class="line">&lt;tr&gt;                                      </span><br><span class="line">   &lt;td&gt;&lt;&#x2F;td&gt;   </span><br><span class="line">   &lt;td class&#x3D;&quot;submitTD&quot;&gt;</span><br><span class="line">       &lt;a href&#x3D;&quot;#&quot; onclick&#x3D;&quot;forgotPassword();&quot; id&#x3D;&quot;ZLoginForgotPassword&quot; aria-controls&#x3D;&quot;ZLoginForgotPassword&quot; aria-expanded&#x3D;&quot;false&quot;&gt;&lt;fmt:message key&#x3D;&quot;forgotPassword&quot;&#x2F;&gt;&lt;&#x2F;a&gt;</span><br><span class="line">   &lt;&#x2F;td&gt;</span><br><span class="line">&lt;&#x2F;tr&gt;</span><br></pre></td></tr></table></figure><p>Kemudian silakan edit di bagian tersebut, hanya mengubah isi dibagian itu saja, code yang sebelumnya berada di atas sintaxt</p><tr>, dipindahkan menjadi dibawah</tr>. Berikut contoh perubahannya<p></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;tr&gt;                                      </span><br><span class="line">   &lt;td&gt;&lt;&#x2F;td&gt;</span><br><span class="line">   &lt;td class&#x3D;&quot;submitTD&quot;&gt;</span><br><span class="line">       &lt;a href&#x3D;&quot;#&quot; onclick&#x3D;&quot;forgotPassword();&quot; id&#x3D;&quot;ZLoginForgotPassword&quot; aria-controls&#x3D;&quot;ZLoginForgotPassword&quot; aria-expanded&#x3D;&quot;false&quot;&gt;&lt;fmt:message key&#x3D;&quot;forgotPassword&quot;&#x2F;&gt;&lt;&#x2F;a&gt;</span><br><span class="line">   &lt;&#x2F;td&gt;</span><br><span class="line">&lt;&#x2F;tr&gt;</span><br><span class="line">&lt;c:if test&#x3D;&quot;$&#123;domainInfo.attrs.zimbraFeatureResetPasswordStatus eq &#39;enabled&#39;&#125;&quot;&gt;</span><br></pre></td></tr></table></figure><p>Jika sudah, silakan disimpan kemudian restart service mailboxnya</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">su - zimbra</span><br><span class="line">zmmailboxdctl restart</span><br></pre></td></tr></table></figure><p>Silakan akses Zimbra nya dan lihat tampilan loginnya, maka tepat dibagian tombol Sign In, akan ada link Forgot Password<br><img src="https://i.imgur.com/cYjNlXL.jpg" alt=""><br>Mungkin cukup sekian, semoga bermanfaat</p><p><a href="https://rizkypratama.id/blog/2018/09/06/mengatasi-link-forgot-password-tidak-muncul-pada-login-screen-zimbra-8-8-9-patch-4/" target="_blank" rel="external nofollow noopener noreferrer" title="Source">Source</a></p>]]></content>
      
      
      <categories>
          
          <category> HowTo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Zimbra </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Cara Menggunakan Fitur Forgot Password Zimbra</title>
      <link href="/cara-menggunakan-fitur-forgot-password/"/>
      <url>/cara-menggunakan-fitur-forgot-password/</url>
      
        <content type="html"><![CDATA[<p>Tahukah kamu bahwa pada Zimbra mulai versi 8.8.9 sudah terdapat fitur baru yang sangat membantu user dan administrator? Yap benar, fitur tersebut adalah fitur Forgot Password pada Zimbra yang ada mulai di versi tersebut. Fitur ini sangat berguna jika ada salah satu user yang lupa dengan password dari akun Zimbra tersebut. User tidak perlu repot-repot meminta reset password kepada administrator agar dapat menggunakan emailnya kembali.</p><a id="more"></a><p>Dari sisi administrator juga dimudahkan, karena menghilangkan salah satu beban pekerjaannya. Untuk menggunakan Fitur Forgot password di Zimbra ini, pastikan kamu sudah menambahkan Password Recovery Account di menu preference webmail Zimbra kamu. Jika bingung kamu dapat cek postingan saya sebelumnya yakni Cara Menambahkan Password Recovery Account di Zimbra.</p><p>Kamu sudah melakukan penambahan password recovery account? Oke, jika sudah maka kamu sudah dapat menggunakan Fitur Forgot password tersebut. Bagaimana cara menggunakan fitur forgot password di Zimbra? Berikut Tutorial Cara Menggunakan Fitur Forgot Password Zimbra.</p><h5 id="Cara-Menggunakan-Fitur-Forgot-Password-Zimbra"><a href="#Cara-Menggunakan-Fitur-Forgot-Password-Zimbra" class="headerlink" title="Cara Menggunakan Fitur Forgot Password Zimbra."></a>Cara Menggunakan Fitur Forgot Password Zimbra.</h5><p>Jika kamu sudah menambahkan password recovery account pada Email Zimbra kamu, kamu tak perlu khawatir lagi jika kamu lupa password. Pada menu login awal, kamu bisa klik menu Forgot Password dibawah tombol Sign in.<br><img src="https://i.imgur.com/cYjNlXL.jpg" alt=""><br>Kemudian kamu akan dialihkan ke menu Forgot Password. Silakan isi username dari email zimbra yang kamu miliki, jika sudah pilih Submit.<br><img src="https://i.imgur.com/lYsmc8S.jpg" alt=""><br>Maka akan muncul email password recovery kamu. Untuk melakukan reset password, pilih <strong>Request Code</strong>. Kemudian cek pada akun recovery password kamu dan dapatkan code yang dikirimkan dari email server Zimbra.<br><img src="https://i.imgur.com/FCXrGum.jpg" alt=""><br>Salin kode yang diberikan dari Zimbra tersebut. Kode tersebut hanya valid dalam waktu 10 menit kedepan, jadi kamu tidak boleh berlama-lama menginputnya.<br><img src="https://i.imgur.com/RvFnNx3.jpg" alt=""><br>Kembali ke email server Zimbra, kemudian masukkan kode yang diberikan tadi. Jika sudah klik Verify Code.<br><img src="https://i.imgur.com/E3oXfZt.jpg" alt=""><br>Kemudian kita akan dihadapkan pada 2 pilihan, karena tujuan utamanya adalah untuk mereset password maka pilih Reset Password.<br><img src="https://i.imgur.com/RwHwErw.jpg" alt=""><br>Kemudian isikan password baru email zimbra yang kamu miliki. Pastikan password tersebut memiliki kriteria Strong Password agar tidak mudah diketahui atau diretas oleh pihak lain. Jika sudah pilih Submit</p><p>Sekarang password akun email Zimbra kamu sudah berhasil di reset dan dapat digunakan kembali. Mudah bukan? Fitur ini memang sangat memudahkan kita sebagai user untuk melakukan reset password email akun tersebut.</p><p>Silakan share ke teman kamu yang menggunakan Zimbra juga agar tidak ketinggalan info ini.</p><p>Link Forgot Password tidak muncul pada halaman login? Tenang saja! Buka link dibawah ini<br><a href="https://tutorial.getmedik.co.id/mengatasi-link-forgot-password-tidak-muncul-pada-login-screen-zimbra">Mengatasi link forgot password tidak muncul pada login screen</a></p><p><a href="https://mukharom.com/cara-menggunakan-fitur-forgot-password-zimbra/" target="_blank" rel="external nofollow noopener noreferrer" title="Source">Source</a></p>]]></content>
      
      
      <categories>
          
          <category> HowTo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Zimbra </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Cara Aktifasi Fitur Forgot Password Zimbra</title>
      <link href="/how-to-activate-forgot-password/"/>
      <url>/how-to-activate-forgot-password/</url>
      
        <content type="html"><![CDATA[<p>Zimbra baru saja menginformasikan versi terbaru yaitu Zimbra 8.8.9 dengan codename Curie. Salah satu fitur yang dimunculkan adalah Forgot Password / Self-serve Account Recovery. Dengan mengaktifkan fitur forgot password di Zimbra 8.8.9 ini, user dapat melakukan perubahan atau reset password tanpa harus menghubungi tim Admin Zimbra.</p><a id="more"></a><p>Secara default, fitur ini dalam status belum aktif sehingga diaktifkan secara manual baik di level COS maupun User.</p><p>Untuk mengaktifkan di level COS gunakan perintah berikut sebagai user zimbra:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">zmprov mc nama_cos zimbraFeatureResetPasswordStatus enabled</span><br><span class="line">1</span><br><span class="line">zmprov mc nama_cos zimbraFeatureResetPasswordStatus enabled</span><br></pre></td></tr></table></figure><p>Untuk mengaktifkan di level User gunakan perintah berikut sebagai user zimbra:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">zmprov ma nama_account zimbraFeatureResetPasswordStatus enabled</span><br><span class="line">1</span><br><span class="line">zmprov ma nama_account zimbraFeatureResetPasswordStatus enabled</span><br></pre></td></tr></table></figure><p>Contoh:</p><p>Lakukan pengecekan terlebih dahulu untuk memastikan fitur tersebut sudah aktif atau belum</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">[root@zimbra ]# su - zimbra</span><br><span class="line"></span><br><span class="line">[zimbra@zimbra ~]$ zmprov gc staff_test zimbraFeatureResetPasswordStatus</span><br><span class="line"># name staff_test</span><br><span class="line">zimbraFeatureResetPasswordStatus: disabled</span><br><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">[root@zimbra ]# su - zimbra</span><br><span class="line"> </span><br><span class="line">[zimbra@zimbra ~]$ zmprov gc staff_test zimbraFeatureResetPasswordStatus</span><br><span class="line"># name staff_test</span><br><span class="line">zimbraFeatureResetPasswordStatus: disabled</span><br><span class="line">Disini kami menggunakan COS dengan nama staff_test</span><br><span class="line"></span><br><span class="line">[zimbra@zimbra ~]$ zmprov mc staff_test zimbraFeatureResetPasswordStatus enabled</span><br><span class="line">1</span><br><span class="line">[zimbra@zimbra ~]$ zmprov mc staff_test zimbraFeatureResetPasswordStatus enabled</span><br></pre></td></tr></table></figure><p>Untuk memastikan apakah fitur tersebut juga aktif di sisi user yang termasuk dalam COS staff_test, contoh disini adalah <a href="mailto:someone@example.com" target="_blank" rel="external nofollow noopener noreferrer">someone@example.com</a>, Ketikkan perintah berikut:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[zimbra@zimbra ~]$ zmprov ga someone@example.com zimbraFeatureResetPasswordStatus</span><br><span class="line"># name someone@example.com</span><br><span class="line">zimbraFeatureResetPasswordStatus: enabled</span><br><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">[zimbra@zimbra ~]$ zmprov ga someone@example.com zimbraFeatureResetPasswordStatus</span><br><span class="line"># name someone@example.com</span><br><span class="line">zimbraFeatureResetPasswordStatus: enabled</span><br></pre></td></tr></table></figure><p>Ketika perintah di atas di eksekusi, beberapa atribut yang diaktifkan di fitur ini antara lain:</p><ul><li>zimbraResetPasswordRecoveryCode – Recovery code sent to recovery email address</li><li>zimbraResetPasswordRecoveryCodeExpiry – Expiry time for password reset recovery code (Default: 10 minutes)</li><li>zimbraRecoveryAccountVerificationData – A JSON encrypted token to contain all the data need to validate a verification code for email address.</li><li>zimbraRecoveryAccountCodeValidity – Expiry time for recovery email code verification (Default: 1 day)</li><li>zimbraPasswordRecoveryMaxAttempts – Maximum attempts for password recovery resend (Default: 10)</li><li>zimbraFeatureResetPasswordSuspensionTime – time for which reset password feature is suspended (Default: 1 day)</li></ul><p>Setelah itu lakukan pengecekan di Zimbra Web Client di menu <em>Preferences &gt; Accounts &gt; Password Recovery Account Settings</em></p><p><a href="https://i.imgur.com/Xo0UJmx.png" target="_blank" rel="external nofollow noopener noreferrer" title="Forgot Password"><img src="https://i.imgur.com/Xo0UJmx.png" alt="Forgot Password" title="Forgot Password"></a></p><p>Zimbra Forgot Password Menu - Mengaktifkan Fitur Forgot Password di Zimbra 8.8.9</p><p>Selanjutnya kita tinggal memasukkan email lain untuk recovery password account <a href="mailto:someone@example.com" target="_blank" rel="external nofollow noopener noreferrer">someone@example.com</a>. Dimana proses nya akan dilakukan verifikasi terlebih dahulu. Untuk lebih detilnya akan kita bahas di artikel berikutnya.</p><p>Untuk pengelolaan self service password yang lebih advanced, anda bisa menggunakan JSSP dari Jabetto.</p><p><a href="https://www.ilmuzimbra.com/fitur-forgot-password-zimbra/" target="_blank" rel="external nofollow noopener noreferrer" title="Source">Source</a></p>]]></content>
      
      
      <categories>
          
          <category> HowTo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Zimbra </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Check Zimbra Mail Server</title>
      <link href="/zimbra-command/"/>
      <url>/zimbra-command/</url>
      
        <content type="html"><![CDATA[<ul><li>AntiVirus LogWatch<ul><li>/opt/zimbra/bin/amavis-logwatch /var/log/zimbra.log</li></ul></li><li>Update Antivirus<br>Check bahwa ini telah diset true, dan jika tidak, set menjadi true dan restart amavisd dan MTA:<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ zmlocalconfig antispam_enable_rule_updates</span><br><span class="line">antispam_enable_rule_updates &#x3D; false</span><br><span class="line">$ zmlocalconfig antispam_enable_restarts</span><br><span class="line">antispam_enable_restarts &#x3D; false</span><br><span class="line">$ zmlocalconfig -e antispam_enable_rule_updates&#x3D;true</span><br><span class="line">$ zmlocalconfig -e antispam_enable_restarts&#x3D;true</span><br><span class="line">$ zmamavisdctl restart</span><br><span class="line">$ zmmtactl restart</span><br></pre></td></tr></table></figure>Check versi Clamav<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;opt&#x2F;zimbra&#x2F;common&#x2F;sbin&#x2F;clamd --version --config-file&#x3D;&#x2F;opt&#x2F;zimbra&#x2F;conf&#x2F;clamd.conf</span><br></pre></td></tr></table></figure></li></ul>]]></content>
      
      
      <categories>
          
          <category> Install </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Zimbra </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Install Zimbra Mail Server</title>
      <link href="/install-zimbra/"/>
      <url>/install-zimbra/</url>
      
        <content type="html"><![CDATA[<h1 id="Cara-Install-Open-Source-Zimbra-Mail-Server-ZCS-8-8-12-di-CentOS-7"><a href="#Cara-Install-Open-Source-Zimbra-Mail-Server-ZCS-8-8-12-di-CentOS-7" class="headerlink" title="Cara Install Open Source Zimbra Mail Server (ZCS 8.8.12) di CentOS 7"></a><strong>Cara Install Open Source Zimbra Mail Server (ZCS 8.8.12) di CentOS 7</strong></h1><p>Server Mail adalah salah satu server yang penting dan kritikal untuk banyak organisasi karena kebanyakan komunikasi dilakukan melalui email. Di dunia Open source ada beberapa pasang server email gratis,tapi Zimbra adalah salah satu mail server teratas. Server Zimbra Mail atau disebut ZCS (Zimbra Collaboration Suite) ada dalam dua versi, versi Open Source dan enterprise.</p><hr><a id="more"></a><h2>Prerequisites</h2><ul><li>Minimal CentOS 7</li><li>8 GB RAM</li><li>5 GB Free Space on /opt</li><li>FQDN (Fully Qualified Domain Name), in my case it is “mail.example.com”</li><li>A &amp; MX record for your Server</li></ul><h2>Step:1) Login ke CentOS 7 dan apply updates.</h2>Login ke Server CentOS 7 dan update terbaru menggunakan perintah yum dan kemudian reboot ,<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum update &amp;&amp; yum upgrade -y ; reboot</span><br></pre></td></tr></table></figure><p>Setelah reboot, set hostname dari server, dalam kasus saya menggunakan “mail.example.com”</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">~]# hostnamectl set-hostname &quot;mail.example.com&quot;</span><br><span class="line">~]# exec bash</span><br></pre></td></tr></table></figure><p>Tambah perintah berikut di <b>/etc/hosts</b> file,</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">192.168.0.108 mail.example.com mail</span><br></pre></td></tr></table></figure><p>Setelah konfigurasi hostname, verifikasi A dan MX terkonfigurasi untuk domain menggunakan perintah dig,</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@mail ~]# dig -t A mail.example.com</span><br><span class="line">[root@mail ~]# dig -t MX example.com</span><br></pre></td></tr></table></figure><p><strong>Disable Selinux</strong></p><p>Berikut, disable SELinux. check status dari SELinux, jalankan perintah seperti berikut.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">getenforce</span><br></pre></td></tr></table></figure><p>Output</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">enforcing</span><br></pre></td></tr></table></figure><p>Untuk mengganti dari enforcing ke disabled ikuti langkah seperti berikut</p><p>vim /etc/selinux/config<br>Ganti SELinux dari enforcing ke disabled seperti berikut<br><img src="https://i.imgur.com/Eby8wJh.png" alt=""></p><p><strong>Disable Unwanted Services</strong></p><p>Instalasi default CentOS 7 dengan postfix daemon telah terinstal dan berjalan. Untuk disable dan hapus service postfix jalankan perintah berikut:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">systemctl stop postfix</span><br><span class="line">systemctl disable postfix</span><br></pre></td></tr></table></figure><p>Install extra packages<br>Berikut, install beberapa paket yang di perlukan</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yum -y install unzip net-tools sysstat openssh-clients perl-core libaio nmap-ncat libstdc++.so.6 wget libreoffice-headless libreoffice bind-utils</span><br><span class="line">Reboot server</span><br></pre></td></tr></table></figure><p>At this point, reboot the system.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">reboot</span><br></pre></td></tr></table></figure><h2>Step:2) Install Zimbra dependencies menggunakan yum</h2>Jalankan perintah berikut untuk install Zimbra / ZCS dependencies<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@mail ~]# yum install unzip net-tools sysstat openssh-clients perl-core libaio nmap-ncat libstdc++.so.6 wget -y</span><br></pre></td></tr></table></figure><h2>Step:3) Download versi terbaru dari Zimbra (ZCS 8.8.12) menggunakan wget command</h2>Buat folder dengan nama “zimbra”<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@mail ~]# mkdir zimbra &amp;&amp; cd zimbra</span><br></pre></td></tr></table></figure><p>Gunakan perintah wget seperti berikut untuk download versi terbaru dari ZCS 8.8.10 dari terminal,</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@mail zimbra]# wget https:&#x2F;&#x2F;files.zimbra.com&#x2F;downloads&#x2F;8.8.12_GA&#x2F;zcs-8.8.12_GA_3794.RHEL6_64.20190329045002.tgz --no-check-certificate</span><br></pre></td></tr></table></figure><h2>Step:4) Install Zimbra / ZCS 8.8.12</h2>Extract download tgz file of ZCS 8.8.10 menggunakan perintah tar seperti berikut<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@mail zimbra]# tar zxpvf zcs-8.8.10_GA_3039.RHEL7_64.20180928094617.tgz</span><br></pre></td></tr></table></figure>buka folder hasil extract dan jalankan script install,<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@mail zimbra]# cd zcs-8.8.12_GA_3794.RHEL6_64.20190329045002</span><br><span class="line">[root@mail zcs-8.8.12_GA_3794.RHEL6_64.20190329045002]# .&#x2F;install.sh</span><br></pre></td></tr></table></figure>kamu akan melihat sebuah text based wizard.<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">Operations logged to &#x2F;tmp&#x2F;install.log.luSct9Pm</span><br><span class="line">Checking for existing installation...</span><br><span class="line">    zimbra-chat...NOT FOUND</span><br><span class="line">    zimbra-drive...NOT FOUND</span><br><span class="line">    zimbra-imapd...NOT FOUND</span><br><span class="line">    zimbra-network-modules-ng...NOT FOUND</span><br><span class="line">    zimbra-rpost...NOT FOUND</span><br><span class="line">    zimbra-ldap...NOT FOUND</span><br><span class="line">    zimbra-logger...NOT FOUND</span><br><span class="line">    zimbra-mta...NOT FOUND</span><br><span class="line">    zimbra-dnscache...NOT FOUND</span><br><span class="line">    zimbra-snmp...NOT FOUND</span><br><span class="line">    zimbra-store...NOT FOUND</span><br><span class="line">    zimbra-apache...NOT FOUND</span><br><span class="line">    zimbra-spell...NOT FOUND</span><br><span class="line">    zimbra-convertd...NOT FOUND</span><br><span class="line">    zimbra-memcached...NOT FOUND</span><br><span class="line">    zimbra-proxy...NOT FOUND</span><br><span class="line">    zimbra-archiving...NOT FOUND</span><br><span class="line">    zimbra-core...NOT FOUND</span><br><span class="line">IMPORTANT-READ CAREFULLY: THE TERMS OF THIS END USER LICENSE AGREEMENT (&quot;EULA&quot;) WILL GOVERN YOUR USE OF THE SOFTWARE. BY DOWNLOADING, INSTALLING, OR USING THE SOFTWARE, YOU (THE INDIVIDUAL OR LEGAL ENTITY) ARE (1)¬†REPRESENTING THAT YOU ARE OVER THE AGE OF 18 AND HAVE THE CAPACITY AND AUTHORITY TO BIND YOURSELF OR THE LEGAL ENTITY, AS APPLICABLE, TO THE TERMS OF THIS EULA AND (2)¬†AGREEING ON BEHALF OF YOURSELF AND&#x2F;OR AS AN AUTHORIZED REPRESENTATIVE OF THE LEGAL ENTITY, AS APPLICABLE, TO BE BOUND BY THIS EULA. IF YOU DO NOT AGREE TO THE TERMS OF THIS EULA, YOU MUST NOT DOWNLOAD, INSTALL, OR USE THE SOFTWARE.</span><br></pre></td></tr></table></figure>Select “y” on the two EULA and license agreement questions.<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">The parties acknowledge and agree that a material breach of this</span><br><span class="line">Agreement adversely affecting Autonomy&#39;s proprietary rights would cause</span><br><span class="line">irreparable harm to Autonomy for which a remedy at law would be inadequate and</span><br><span class="line">that Autonomy shall be entitled to injunctive relief in addition to any</span><br><span class="line">remedies it may have hereunder or at law.</span><br><span class="line">Do you agree with the terms of the software license agreement? [N]y</span><br><span class="line">    Use Zimbra&#39;s package repository [Y] y</span><br><span class="line">    Importing Zimbra GPG key</span><br><span class="line">    Configuring package repository</span><br><span class="line">    Checking for installable packages</span><br><span class="line">    Found zimbra-core (local)</span><br><span class="line">    Found zimbra-ldap (local)</span><br><span class="line">    Found zimbra-logger (local)</span><br><span class="line">    Found zimbra-mta (local)</span><br><span class="line">    Found zimbra-dnscache (local)</span><br><span class="line">    Found zimbra-snmp (local)</span><br><span class="line">    Found zimbra-store (local)</span><br><span class="line">    Found zimbra-apache (local)</span><br><span class="line">    Found zimbra-spell (local)</span><br><span class="line">    Found zimbra-convertd (local)</span><br><span class="line">    Found zimbra-memcached (repo)</span><br><span class="line">    Found zimbra-proxy (local)</span><br><span class="line">    Found zimbra-archiving (local)</span><br><span class="line">    Found zimbra-chat (repo)</span><br><span class="line">    Found zimbra-drive (repo)</span><br><span class="line">    Found zimbra-imapd (local)</span><br><span class="line">    Found zimbra-network-modules-ng (local)</span><br></pre></td></tr></table></figure>In this blog, we are going to install all packages except the convertd, chat , drive , imapd and network-modules-ngand, which are still in beta:<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">Select the packages to install</span><br><span class="line">Install zimbra-ldap [Y] </span><br><span class="line">Install zimbra-logger [Y] </span><br><span class="line">Install zimbra-mta [Y] </span><br><span class="line">Install zimbra-dnscache [Y] </span><br><span class="line">Install zimbra-snmp [Y] </span><br><span class="line">Install zimbra-store [Y] </span><br><span class="line">Install zimbra-apache [Y] </span><br><span class="line">Install zimbra-spell [Y] </span><br><span class="line">Install zimbra-convertd [Y] n</span><br><span class="line">Install zimbra-memcached [Y] </span><br><span class="line">Install zimbra-proxy [Y] </span><br><span class="line">Install zimbra-archiving [N] </span><br><span class="line">Install zimbra-chat [Y] n</span><br><span class="line">Install zimbra-drive [Y] n</span><br><span class="line">Install zimbra-imapd (BETA - for evaluation only) [N] n</span><br><span class="line">Install zimbra-network-modules-ng [Y] n</span><br></pre></td></tr></table></figure>Press “y” to allow modification of the system:<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">The system will be modified.  Continue? [N] Y</span><br><span class="line">Beginning Installation - see &#x2F;tmp&#x2F;install.log.luSct9Pm for details...</span><br><span class="line">zimbra-core-components will be downloaded and installed.</span><br><span class="line">zimbra-timezone-data will be installed.</span><br><span class="line">zimbra-common-mbox-conf-msgs will be installed.</span><br><span class="line">zimbra-common-mbox-db will be installed.</span><br><span class="line">zimbra-common-mbox-conf will be installed.</span><br><span class="line">zimbra-common-mbox-native-lib will be installed.</span><br><span class="line">zimbra-common-mbox-docs will be installed.</span><br><span class="line">zimbra-common-mbox-conf-attrs will be installed.</span><br><span class="line">zimbra-common-mbox-conf-rights will be installed.</span><br><span class="line">zimbra-core will be installed.......</span><br></pre></td></tr></table></figure>This is another hot step. You need to select yes to change the domain and select your own instead mail.example.com, just example.com<pre><code>DNS ERROR resolving MX for mail.example.comIt is suggested that the domain name have an MX record configured in DNSChange domain name? [Yes] YCreate domain: [mail.example.com] example.com....done.Checking for port conflicts</code></pre><p>You need to change the admin password by pressing the number 6 (zimbra-store) and then number 4 on the submenu:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">Main menu</span><br><span class="line">   1) Common Configuration:                                                  </span><br><span class="line">   2) zimbra-ldap:                             Enabled                       </span><br><span class="line">   3) zimbra-logger:                           Enabled                       </span><br><span class="line">   4) zimbra-mta:                              Enabled                       </span><br><span class="line">   5) zimbra-snmp:                             Enabled                       </span><br><span class="line">   6) zimbra-store:                            Enabled                       </span><br><span class="line">   7) zimbra-spell:                            Enabled                       </span><br><span class="line">   8) zimbra-convertd:                         Enabled                       </span><br><span class="line">   9) zimbra-proxy:                            Enabled                       </span><br><span class="line">  10) Default Class of Service Configuration:                                </span><br><span class="line">  11) Enable default backup schedule:          yes                           </span><br><span class="line">   s) Save config to file                                                    </span><br><span class="line">   x) Expand menu                                                            </span><br><span class="line">   q) Quit                                    </span><br><span class="line">*** CONFIGURATION COMPLETE - press &#39;a&#39; to apply</span><br><span class="line">Press “a” to apply the changes:</span><br><span class="line"></span><br><span class="line">Select from menu, or press &#39;a&#39; to apply config (? - help) </span><br><span class="line">a.......</span><br><span class="line">Save configuration data to a file? [Yes]......</span><br><span class="line">Save config in file: [&#x2F;opt&#x2F;zimbra&#x2F;config.10904]</span><br><span class="line">Saving config in &#x2F;opt&#x2F;zimbra&#x2F;config.10904...done.</span><br></pre></td></tr></table></figure><p>Press “y” to continue:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">Operations logged to &#x2F;tmp&#x2F;zmsetup.20180111-132052.log</span><br><span class="line">Setting local config values...done.</span><br><span class="line">Initializing core config...Setting up CA...done.</span><br><span class="line">Deploying CA to &#x2F;opt&#x2F;zimbra&#x2F;conf&#x2F;ca ...done.</span><br><span class="line">Creating SSL zimbra-store certificate...done.</span><br><span class="line">Creating new zimbra-ldap SSL certificate...done.</span><br><span class="line">Creating new zimbra-mta SSL certificate...done.</span><br><span class="line">Creating new zimbra-proxy SSL certificate...done.</span><br><span class="line">Installing mailboxd SSL certificates...done.</span><br><span class="line">Installing MTA SSL certificates...done.</span><br><span class="line">Installing LDAP SSL certificate...done.</span><br><span class="line">Installing Proxy SSL certificate...done.</span><br><span class="line">Initializing ldap...done.</span><br><span class="line">Setting replication password...done.</span><br><span class="line">Setting Postfix password...done.</span><br><span class="line">Setting amavis password...done.</span><br><span class="line">Setting nginx password...done.</span><br><span class="line">Setting BES searcher password...done.</span><br><span class="line">Creating server entry for zcs-886.zimbra.io...done.</span><br><span class="line">Setting Zimbra IP Mode...done.</span><br><span class="line">Saving CA in ldap...done.</span><br><span class="line">Saving SSL Certificate in ldap...done.</span><br><span class="line">Setting spell check URL...done.</span><br><span class="line">Setting service ports on zcs-886.zimbra.io...done.</span><br><span class="line">Setting zimbraFeatureTasksEnabled&#x3D;TRUE...done.</span><br><span class="line">Setting zimbraFeatureBriefcasesEnabled&#x3D;TRUE...done.</span><br><span class="line">Checking current setting of zimbraReverseProxyAvailableLookupTargets</span><br><span class="line">Querying LDAP for other mailstores</span><br><span class="line">Searching LDAP for reverseProxyLookupTargets...done.</span><br></pre></td></tr></table></figure><p>Press “enter” to finish the installation:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Moving &#x2F;tmp&#x2F;zmsetup.20180111-132052.log to &#x2F;opt&#x2F;zimbra&#x2F;log</span><br><span class="line">     Configuration complete - press return to exit</span><br></pre></td></tr></table></figure><p>Setelah instalasi berhasil, buka browser dan buka alamat server’s IP</p><p>Zimbra-Installation-Completed-CentOS7</p><h2>Step: 5) Konfigurasi Firewall</h2>Buka ports di firewall jika os firewall running di server<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@mail ~]# firewall-cmd --permanent --add-port&#x3D;&#123;25,80,110,143,443,465,587,993,995,5222,5223,9071,7071&#125;&#x2F;tcp</span><br><span class="line">success</span><br><span class="line">[root@mail ~]# firewall-cmd --reload</span><br><span class="line">success</span><br><span class="line">[root@mail ~]#</span><br></pre></td></tr></table></figure><h2>Step:6) Akses Zimbra Admin Portal & Web Mail Client</h2>Untuk mengakses Zimbra Admin Portal, ketik URL di bawah dalam Web Browser<p><a href="https://mail.example.com:7071/" target="_blank" rel="external nofollow noopener noreferrer">https://mail.example.com:7071/</a></p>]]></content>
      
      
      <categories>
          
          <category> Install </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Zimbra </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Install OpsManager MongoDb</title>
      <link href="/install-ops-manager/"/>
      <url>/install-ops-manager/</url>
      
        <content type="html"><![CDATA[<p><strong>Ops Manager</strong> adalah tool luar biasa yang disediakan oleh MongoDB. Kamu butuh lisensi untuk menggunakannya di production dan keuntungannya setimpal(info lebih di mongodb.com).</p><p>Kamu bisa melihat sebagai dashboard yang dibuka untuk siapa saja di organisasi anda, dimana kamu dapat sepenuhnya mengatur dan mengotomatiskan MongoDB instances, set replica dan sharding juga diberikan wawasan luas mengenai penggunaan dan data.</p><hr><a id="more"></a><p>Untuk melangkah lebih jauh, Arsitektur, Konfigurasi, Topologi Penyebaran Contoh<br>Konten:</p><ul><li>Installasi</li><li>Simple test deployment on CentOS</li><li>Automation Agent</li><li>Configuration</li><li>Appendix</li></ul><p>Simple test deployment on CentOS (docs.opsmanager.mongodb.com)<br>Ini adalah langkah pertama yang menarik dan bisa di gunakan untuk non-production environments (dev, staging). Anda dapat memvalidasi banyak aspek tentang prosedur, seperti port yang akan dibuka dan opsi OS.</p><p>Semua Ops Manager komponen akan jalan di server yang sama: db, backup, application.</p><p>MongoDB harus di install terlebih dahulu dan terkonfigurasi ke host Ops Manager data &amp; backup.</p><p>Pre-requisites (hosts, ntpupdate, mongod, firewall)<br>:peringatan: Pastikan untuk dengan benar update DNS atau file /etc/hosts file dari setiap server, sebuah kesalahan kecil typo dapat membuat rumit (true story).</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"># pastikan ntp &amp; ntpupdate telah terinstal (ini penting untuk komunikasi antar server)</span><br><span class="line">sudo yum install ntpupdate</span><br><span class="line">sudo ntpdate 0.centos.pool.ntp.org</span><br><span class="line"># install MongoDB server &amp; shell</span><br><span class="line">echo &quot;[mongodb-org-4.2]</span><br><span class="line">name&#x3D;MongoDB Repository</span><br><span class="line">baseurl&#x3D;https:&#x2F;&#x2F;repo.mongodb.org&#x2F;yum&#x2F;redhat&#x2F;$releasever&#x2F;mongodb-org&#x2F;4.2&#x2F;x86_64&#x2F;</span><br><span class="line">gpgcheck&#x3D;1</span><br><span class="line">enabled&#x3D;1</span><br><span class="line">gpgkey&#x3D;https:&#x2F;&#x2F;www.mongodb.org&#x2F;static&#x2F;pgp&#x2F;server-4.2.asc&quot; | sudo tee &#x2F;etc&#x2F;yum.repos.d&#x2F;mongodb.repo</span><br><span class="line">sudo yum install -y mongodb-org mongodb-org-shell</span><br><span class="line"># info: user mongod and group mongod have been created (you can add your user in mongod group)</span><br><span class="line">cat &#x2F;etc&#x2F;passwd</span><br><span class="line">cat &#x2F;etc&#x2F;group</span><br><span class="line"># service mongod jalan secara default, stop dan cegah dari started on server startup</span><br><span class="line">service mongod status</span><br><span class="line">sudo service mongod stop</span><br><span class="line">sudo chkconfig --level 35 mongod off</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># buat direktori untuk mongod: application database, backup, logs</span><br><span class="line">sudo mkdir -p &#x2F;data&#x2F;mongodb&#x2F;opsmanager&#x2F;appdb</span><br><span class="line">sudo chown -R mongod:mongod &#x2F;data&#x2F;mongodb&#x2F;opsmanager&#x2F;appdb</span><br><span class="line">sudo chmod 770 -R &#x2F;data&#x2F;mongodb&#x2F;opsmanager&#x2F;appdb</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># open Ops Manager ports</span><br><span class="line">sudo firewall-cmd --permanent --zone&#x3D;public --add-port&#x3D;8080&#x2F;tcp</span><br><span class="line">sudo firewall-cmd --permanent --zone&#x3D;public --add-port&#x3D;8443&#x2F;tcp</span><br><span class="line">sudo firewall-cmd --permanent --zone&#x3D;public --add-port&#x3D;27000-28000&#x2F;tcp</span><br><span class="line">sudo firewall-cmd --permanent --zone&#x3D;public --add-port&#x3D;25&#x2F;tcp</span><br><span class="line">sudo firewall-cmd --reload</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">KOnfigurasi &amp; jalankan MongoDB databases untuk Ops Manager (app &amp; backup)</span><br><span class="line"># path berdasarkan strategi direktori anda, ukuran cache dari kapasitas server Anda</span><br><span class="line">sudo -u mongod mongod --port 27017 --dbpath &#x2F;data&#x2F;mongodb&#x2F;opsmanager&#x2F;appdb --logpath &#x2F;data&#x2F;mongodb&#x2F;opsmanager&#x2F;logs&#x2F;appdb.log --wiredTigerCacheSizeGB 1 --fork</span><br><span class="line">sudo -u mongod mongod --port 27018 --dbpath &#x2F;data&#x2F;mongodb&#x2F;opsmanager&#x2F;backup --logpath &#x2F;data&#x2F;mongodb&#x2F;opsmanager&#x2F;logs&#x2F;backup.log  --fork</span><br><span class="line"># anda dapat cek jika running</span><br><span class="line">ps -ef | grep mongod</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">Download dan install Ops Manager (sebelumnya diketahui sebagai MongoDB Monitoring Service, atau MMS)</span><br><span class="line">Go to mongodb download page.</span><br><span class="line">Select the version (latest stable one in my case) and copy RPM URL,</span><br><span class="line">For example: https:&#x2F;&#x2F;downloads.mongodb.com&#x2F;on-prem-mms&#x2F;rpm&#x2F;mongodb-mms-4.2.5.56761.20191211T0141Z-1.x86_64.rpm.</span><br><span class="line"># ambil dan install versi yang dipilih</span><br><span class="line">curl -OL https:&#x2F;&#x2F;downloads.mongodb.com&#x2F;on-prem-mms&#x2F;rpm&#x2F;mongodb-mms-4.2.5.56761.20191211T0141Z-1.x86_64.rpm</span><br><span class="line">sudo rpm -ivh mongodb-mms-3.6.3.606-1.x86_64.rpm</span><br><span class="line"></span><br><span class="line"># ll &#x2F;opt&#x2F;mongodb&#x2F;mms</span><br><span class="line"># mongodb-mms user and group have been created</span><br><span class="line">cat &#x2F;etc&#x2F;passwd</span><br><span class="line">cat &#x2F;etc&#x2F;group</span><br><span class="line"># edit &amp; review properties file (contains the connection string to app db)</span><br><span class="line">sudo vi &#x2F;opt&#x2F;mongodb&#x2F;mms&#x2F;conf&#x2F;conf-mms.properties</span><br><span class="line"># start Ops Manager!</span><br><span class="line">sudo service mongodb-mms start</span><br><span class="line"># Generating new Ops Manager private key...</span><br><span class="line"># Starting pre-flight checks</span><br><span class="line"># Successfully finished pre-flight checks</span><br><span class="line"># Migrate Ops Manager data</span><br><span class="line">#    Running migrations...[  OK  ]</span><br><span class="line"># Start Ops Manager server</span><br><span class="line">#    Instance 0 starting...............[  OK  ]</span><br><span class="line"># Starting pre-flight checks</span><br><span class="line"># Successfully finished pre-flight checks</span><br><span class="line"># Start Backup Daemon...[  OK  ]</span><br><span class="line">Open the Ops Manager URL in a browser: http:&#x2F;&#x2F;&lt;opsManagerHost&gt;:8080</span><br><span class="line">Click on Register then fill and submit the form, follow the guide for the basic configuration (that can be easily edited after)</span><br><span class="line">You should land in the Ops manager page!</span><br></pre></td></tr></table></figure><p><strong>Automation agent</strong><br>Ops Manager dapat mengotomatiskan semua MongoDB instances dan servers thanks to the Automation Agent that must be installed on all servers.</p><p>CentOS (tutorial dari mongodb.com)<br>Procedure ini telah divalidasikan di CentOS Linux release 7.4.1708 (Core)</p><p>Log in ke server<br><strong>pastikan ntp &amp; ntpupdate are installed</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo yum install ntpupdate</span><br><span class="line">sudo ntpdate 0.centos.pool.ntp.org</span><br></pre></td></tr></table></figure><p><strong>ports harus tidak sedang digunakan dan firewall mengizinkan traffic di ports antara server</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sudo firewall-cmd --permanent --zone&#x3D;public --add-port&#x3D;8080&#x2F;tcp</span><br><span class="line">sudo firewall-cmd --permanent --zone&#x3D;public --add-port&#x3D;8443&#x2F;tcp</span><br><span class="line">sudo firewall-cmd --permanent --zone&#x3D;public --add-port&#x3D;27000-28000&#x2F;tcp</span><br><span class="line">sudo firewall-cmd --reload</span><br></pre></td></tr></table></figure><p><strong>pastikan semua URLS dikenal</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo vi &#x2F;etc&#x2F;hosts</span><br></pre></td></tr></table></figure><p><strong>untuk contoh di Ops Manager URL</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -ivs http:&#x2F;&#x2F;myopsmanagerurl:8080</span><br></pre></td></tr></table></figure><p>*<em>download file package dari Ops Manager dan install *</em></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">curl -OL http:&#x2F;&#x2F;myopsmanagerurl:8080&#x2F;download&#x2F;agent&#x2F;automation&#x2F;mongodb-mms-automation-agent-manager-10.2.10.5921-1.x86_64.rhel7.rpm</span><br><span class="line">sudo rpm -U mongodb-mms-automation-agent-manager-10.2.10.5921-1.x86_64.rhel7.rpm</span><br></pre></td></tr></table></figure><p><strong>ikuti comment untuk mengisi mmsGroupId, mmsApiKey, mmsBaseUrl</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo vi &#x2F;etc&#x2F;mongodb-mms&#x2F;automation-agent.config</span><br></pre></td></tr></table></figure><p><strong>buat direktori data</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo mkdir &#x2F;data</span><br><span class="line">sudo chown mongod:mongod &#x2F;data</span><br></pre></td></tr></table></figure><p><strong>start automation agent</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo service mongodb-mms-automation-agent start</span><br></pre></td></tr></table></figure><p><strong>check status</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo service mongodb-mms-automation-agent status</span><br></pre></td></tr></table></figure><p><strong>investigate issues</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ll &#x2F;var&#x2F;log&#x2F;mongodb-mms-automation</span><br><span class="line">sudo more &#x2F;var&#x2F;log&#x2F;mongodb-mms-automation&#x2F;automation-agent-fatal.log</span><br></pre></td></tr></table></figure><p>Anda harusnya sekarang dapat melihat node di Ops Manager &gt; Deployment &gt; Agents</p><p>Known issues</p><p>libsasl2.so.2: cannot open shared object file: No such file or directory</p><p>/opt/mongodb-mms-automation/bin/mongodb-mms-automation-agent: error while loading shared libraries: libsasl2.so.2: cannot open shared object file: No such file or directory</p><p>Fix:</p><p>cd /lib64<br>sudo ln -s libsasl2.so.3.0.0 libsasl2.so.2<br>SocketException: Address already in use</p><p>E STORAGE [initandlisten] Failed to set up listener: SocketException: Address already in use<br>I CONTROL [initandlisten] now exiting<br>I CONTROL [initandlisten] shutting down with code:48</p><p>Fix:</p><p><strong>lihat proses yang menggunakan port</strong><br>sudo netstat -tulpn | grep :27000<br>sudo kill processid<br>Ubuntu (tutorial from mongodb.com)<br>Updates made from docs.cloudmanager.mongodb.com.</p><p>Prosedur ini telah divalidasi di Ubuntu 16.04.1 LTS</p><p>Konfigurasi<br>Monitoring<br>Setelah server di konfigurasi dan terlihat di Ops Manager, anda setidaknya harus instal satu agen monitoring di satu node.<br>Backup<br>Pastikan backup agen terinstal di server (easy to install from the server view).</p><p>Buat direktori untuk menyimpan head databases</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mkdir &#x2F;data&#x2F;mongodb&#x2F;backupdaemon</span><br><span class="line">sudo chown mongodb-mms:mongodb-mms &#x2F;data&#x2F;mongodb&#x2F;backupdaemon</span><br><span class="line">sudo sudo chmod 774 -R &#x2F;data&#x2F;mongodb&#x2F;backupdaemon</span><br></pre></td></tr></table></figure><p>Di Ops Manager, click Admin di kanan atas &gt; Backup tab. Ikuti langkah untuk konfigurasi backup storage. Anda dapat melalui storage di MongoDB dan koneksi dengan localhost:27018.</p><p>Di Ops Manager, click Backup pada kiri dan buat entry baru.</p><p>Email sending<br>Jika terdapat error pada saat mengirim test message, anda dapat test langsung dari server Ops Manager.</p><p>sudo yum install telnet<br>telnet smtp.mycompany.lan 25</p><p>Appendix<br>Follow what’s going on!<br>You can tail the automataion log file.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">tail -f &#x2F;var&#x2F;log&#x2F;mongodb-mms-automation&#x2F;automation-agent.log</span><br><span class="line">You can also look at the processes running on a MongoDB server.</span><br><span class="line"></span><br><span class="line">ps -ef | grep mongo</span><br><span class="line"># mongod    23947      1  0 14:15 ?        00:00:03 &#x2F;var&#x2F;lib&#x2F;mongodb-mms-automation&#x2F;mongodb-linux-x86_64-3.6.2&#x2F;bin&#x2F;mongod -f &#x2F;data&#x2F;rsDev2_12&#x2F;automation-mongod.conf</span><br><span class="line">sudo more &#x2F;data&#x2F;rsDev2_12&#x2F;automation-mongod.conf</span><br><span class="line"># THIS FILE IS MAINTAINED BY http:&#x2F;&#x2F;myopsmanager:8080 . DO NOT MODIFY AS IT WILL BE OVERWRITTEN.</span><br><span class="line"># To make changes to your MongoDB deployment, please visit http:&#x2F;&#x2F;myopsmanager:8080 . Your Group ID is xxxxxxxxxxxxxxxxxxxxx .</span><br><span class="line">net:</span><br><span class="line">  bindIp: 0.0.0.0</span><br><span class="line">  port: 27000</span><br><span class="line">processManagement:</span><br><span class="line">  fork: &quot;true&quot;</span><br><span class="line">replication:</span><br><span class="line">  replSetName: rsDev2</span><br><span class="line">storage:</span><br><span class="line">  dbPath: &#x2F;data&#x2F;rsDev2_12</span><br><span class="line">systemLog:</span><br><span class="line">  destination: file</span><br><span class="line">  path: &#x2F;data&#x2F;rsDev2_12&#x2F;mongodb.log</span><br><span class="line">sudo tail -f &#x2F;data&#x2F;rsDev2_12&#x2F;mongodb.log</span><br><span class="line">Cleanup a MongoDB server</span><br><span class="line">In case of issues, you may want to clean a server where a MongoDB automation agent was installed, or simply a MongoDB server.</span><br></pre></td></tr></table></figure><p><strong>Remove MongoDB server</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">MongoDB files are located here: &#x2F;var&#x2F;lib&#x2F;mongodb, &#x2F;var&#x2F;log&#x2F;mongodb.</span><br><span class="line"></span><br><span class="line">sudo systemctl stop mongod.service</span><br><span class="line">sudo systemctl disable mongod.service</span><br><span class="line">sudo dpkg -P mongod</span><br><span class="line">sudo systemctl daemon-reload</span><br><span class="line">sudo systemctl reset-failed</span><br><span class="line">sudo apt-get clean</span><br><span class="line">Remove an automation agent</span><br><span class="line"></span><br><span class="line">MongoDB files are located here: &#x2F;var&#x2F;lib&#x2F;mongodb-mms-automation, &#x2F;var&#x2F;log&#x2F;mongodb-mms-automation.</span><br><span class="line"></span><br><span class="line">sudo systemctl stop mongodb-mms-automation-agent</span><br><span class="line">sudo dpkg -P mongodb-mms-automation-agent-manager</span><br><span class="line">sudo rm -rf &#x2F;etc&#x2F;mongodb-mms</span><br><span class="line">sudo rm -rf &#x2F;var&#x2F;lib&#x2F;mongodb-mms-automation</span><br><span class="line">sudo rm -rf &#x2F;var&#x2F;log&#x2F;mongodb-mms-automation</span><br><span class="line">Wait for 5 minutes so Ops manager consider the agent as down.</span><br></pre></td></tr></table></figure><p>Warnings<br>If you followed this procedure, you will probably get this warnings.</p><p>Access control is not enabled for the database</p><p>WARNING: Access control is not enabled for the database.<br>Read and write access to data and configuration is unrestricted.</p><p>_This server is bound to localhost</p><p>WARNING: This server is bound to localhost.<br>Remote systems will be unable to connect to this server.<br>Start the server with –bind_ip</p><address>to specify which IP<br>addresses it should serve responses from, or with –bind_ip_all to<br>bind to all interfaces. If this behavior is desired, start the<br>server with –bind_ip 127.0.0.1 to disable this warning.<p></p><p>/sys/kernel/mm/transparent_hugepage/enabled is ‘always’</p><p>WARNING: /sys/kernel/mm/transparent_hugepage/enabled is ‘always’.<br>We suggest setting it to ‘never’</p><p>Using the XFS filesystem is strongly recommended with the WiredTiger storage engine</p><p>WARNING: Using the XFS filesystem is strongly recommended with the WiredTiger storage engine,<br>See <a href="http://dochub.mongodb.org/core/prodnotes-filesystem" target="_blank" rel="external nofollow noopener noreferrer">http://dochub.mongodb.org/core/prodnotes-filesystem</a>,</p><p>You can review the different mount drives by executing: sudo df -hT.</p></address>]]></content>
      
      
      <categories>
          
          <category> Install </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MongoDB </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Install MongoDB Cluster</title>
      <link href="/install-mongodb-cluster/"/>
      <url>/install-mongodb-cluster/</url>
      
        <content type="html"><![CDATA[<h2 id="Cara-Install-MongoDB-Sharded-Cluster-di-CentOS-7"><a href="#Cara-Install-MongoDB-Sharded-Cluster-di-CentOS-7" class="headerlink" title="Cara Install MongoDB Sharded Cluster di CentOS 7"></a><strong>Cara Install MongoDB Sharded Cluster di CentOS 7</strong></h2><p><strong>Sharding</strong> adalah proses MongoDB untuk mengirim data-set melalui mesin yang berbeda. Dan mengizinkan untuk melakukan horizontal scale dari data, partisi data melalui independent instances, dan dapat menjadi ‘Replica Sets’. Partisi Data-set di ‘Sharding’ menggunakan shard key. Sharding mengizinkan untuk menambah mesin lebih berdasarkan pertumbuhan data.</p><a id="more"></a><hr><h3 id="Sharding-dan-Replication"><a href="#Sharding-dan-Replication" class="headerlink" title="Sharding dan Replication"></a><strong>Sharding dan Replication</strong></h3><p>Secara sederhana. Ketika kamu punya koleksi musik, ‘Sharding’ akan menyimpan dan menjaga koleksi musikmu ke folder yang berbeda. ‘Replication,’ di sisi lain, hanya syncing koleksi musik kamu ke instances yang lain.</p><hr><p><strong>Tiga Sharding Komponen</strong></p><p><strong>Shard</strong> - Digunakan untuk menyimpan seluruh data, dan di linkungan production, masing-masing shard adalah replica sets. Menyediakan ketersediaan tinggi dan konsistensi data.</p><p><strong>Config Server</strong> - Digunakan untuk menyimpan cluster metadata, berisi pemetaan dari cluster data set dan shards. Data ini digunakan oleh server mongos/query untuk mengirim operations. Disarankan untuk menggunakan lebih dari 3 instances in production.<br><strong>Mongos/Query Router</strong> - Ini hanya mongo instances berjalan sebagai application interfaces. Aplikasi akan membuat requests ke mongos instances, dan kemudian mongos akan mengirim requests menggunakan shard key untuk memecah ke replica sets.<br><strong><center>Prerequisites</center></strong></p><ul><li><strong>3 centOS 7 server as Config, Shard, and Mongos/Query Router</strong><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">192.168.88.100      mongod1</span><br><span class="line">192.168.88.101      mongod2</span><br><span class="line">192.168.88.102      mongod3</span><br></pre></td></tr></table></figure></li><li><strong>PORT</strong><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">27017  mongos&#x2F;Query</span><br><span class="line">27018  Config Replica Set</span><br><span class="line">27019  Shard1 Replica Set</span><br><span class="line">27020  Shard2 Replica Set</span><br></pre></td></tr></table></figure></li><li><strong>Root privileges</strong></li><li><strong>Each server connected to another server</strong></li></ul><p><strong>Step 1 - Disable SELinux dan Configure Hosts</strong><br>Untuk tutorial ini, kita akan disable SELinux. Ganti konfigurasi SELinux dari <code>&#39;enforcing&#39;</code> ke <code>&#39;disabled&#39;</code>.<br>Connect ke semua nodes melalui OpenSSH.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh root@SERVERIP</span><br></pre></td></tr></table></figure><p>Disable SELinux dengan perintah sebagai berikut.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim &#x2F;etc&#x2F;sysconfig&#x2F;selinux</span><br></pre></td></tr></table></figure><p>Ganti SELinux menjadi ‘disabled’.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELINUX&#x3D;disabled</span><br></pre></td></tr></table></figure><p>Save dan exit.<br>Berikutnya, edit hosts file di masing-masing server.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim &#x2F;etc&#x2F;hosts</span><br></pre></td></tr></table></figure><p>ikuti konfigurasi hosts sebagai berikut:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">192.168.88.100      mongod1</span><br><span class="line">192.168.88.101      mongod2</span><br><span class="line">192.168.88.102      mongod3</span><br></pre></td></tr></table></figure><p>Save dan exit.<br>Sekarang <code>restart</code> semua server</p><p><strong>Step 2 - Install MongoDB di semua Server</strong></p><p>Kita akan menggunakan latest MongoDB (MongoDB 4.2) untuk semua instances. Tambah repositori baru MongoDB dengan perintah sebagai berikut:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">cat &lt;&lt;&#39;EOF&#39; &gt;&gt; &#x2F;etc&#x2F;yum.repos.d&#x2F;mongodb.repo</span><br><span class="line">[mongodb-org-4.2]</span><br><span class="line">name&#x3D;MongoDB Repository</span><br><span class="line">baseurl&#x3D;https:&#x2F;&#x2F;repo.mongodb.org&#x2F;yum&#x2F;redhat&#x2F;$releasever&#x2F;mongodb-org&#x2F;4.2&#x2F;x86_64&#x2F;</span><br><span class="line">gpgcheck&#x3D;1</span><br><span class="line">enabled&#x3D;1</span><br><span class="line">gpgkey&#x3D;https:&#x2F;&#x2F;www.mongodb.org&#x2F;static&#x2F;pgp&#x2F;server-4.2.asc</span><br><span class="line">EOF</span><br></pre></td></tr></table></figure><p>Sekarang install mongodb 4.2 dari repositori mongodb menggunakan perintah yum seperti perintah dibawah.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo yum -y install mongodb-org</span><br></pre></td></tr></table></figure><p>Setelah mongodb is terinstall, gunakan perintah ‘mongo’ atau ‘mongod’seperti berikut untuk melihat versi.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mongod --version</span><br></pre></td></tr></table></figure><p>Install MongoDB di semua Instances<br><strong>Step 3 - Create Config, Shard Server Replica Sets and Mongos/Query di setiap Server</strong><br>Pada bagian syarat, kita telah menetapkan server config dengan 3 mesin dengan <code>&#39;configsvr&#39;</code>. Dan di langkah ini, kita akan konfigurasikan ke replica set.<br>Jika ada service mongod yang jalan di server, stop dengan perintah systemctl sebagai berikut.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">systemctl stop mongod</span><br><span class="line">systemctl disable mongod</span><br></pre></td></tr></table></figure><p>copy mongod.conf</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">cp &#x2F;etc&#x2F;mongod.conf &#x2F;home&#x2F;mongoconfig.conf</span><br><span class="line">cp &#x2F;etc&#x2F;mongod.conf &#x2F;home&#x2F;shard1.conf</span><br><span class="line">cp &#x2F;etc&#x2F;mongod.conf &#x2F;home&#x2F;shard2.conf</span><br><span class="line">cp &#x2F;etc&#x2F;mongod.conf &#x2F;home&#x2F;mongos.conf</span><br></pre></td></tr></table></figure><p><strong>buka mongodb configuration ‘mongoconfig.conf’.</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim &#x2F;home&#x2F;mongoconfig.conf</span><br></pre></td></tr></table></figure><p>Change DB storage path to your own directory. We will use ‘/mongodb/mongoconfig/‘.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">systemLog:</span><br><span class="line">  destination: file</span><br><span class="line">  logAppend: true</span><br><span class="line">  path: &#x2F;mongodb&#x2F;mongoconfig&#x2F;log&#x2F;configsvr.log</span><br><span class="line">storage:</span><br><span class="line">   dbPath: &#x2F;mongodb&#x2F;mongoconfig&#x2F;data</span><br><span class="line">net:</span><br><span class="line">  port: 27018</span><br><span class="line">bindIP: 192.168.88.100,127.0.0.1</span><br><span class="line">replication:</span><br><span class="line">   replSetName: &quot;rs0&quot;</span><br><span class="line">sharding:</span><br><span class="line">   clusterRole: configsvr</span><br></pre></td></tr></table></figure><p>Save dan exit.<br><strong>open mongodb configuration ‘shard1.conf’.</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim &#x2F;home&#x2F;shard1.conf</span><br></pre></td></tr></table></figure><p>Rubah penempatan DB. Kami menggunakan <code>/mongodb/shard1/</code>.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">systemLog:</span><br><span class="line">  destination: file</span><br><span class="line">  logAppend: true</span><br><span class="line">  path: &#x2F;mongodb&#x2F;shard&#x2F;log&#x2F;shard1.log</span><br><span class="line">storage:</span><br><span class="line">   dbPath: &#x2F;mongodb&#x2F;shard&#x2F;shard1&#x2F;data</span><br><span class="line">net:</span><br><span class="line">  port: 27019</span><br><span class="line">bindIP: 192.168.88.100,127.0.0.1</span><br><span class="line">replication:</span><br><span class="line">   replSetName: &quot;rs1&quot;</span><br><span class="line">sharding:</span><br><span class="line">   clusterRole: shardsvr</span><br></pre></td></tr></table></figure><p>Save dan exit.</p><p><strong>buka mongodb configuration ‘shard2.conf’.</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim &#x2F;home&#x2F;shard2.conf</span><br></pre></td></tr></table></figure><p>Rubah penempatan DB. Kami menggunakan <code>/mongodb/shard2/</code>.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">systemLog:</span><br><span class="line">  destination: file</span><br><span class="line">  logAppend: true</span><br><span class="line">  path: &#x2F;mongodb&#x2F;shard&#x2F;log&#x2F;shard2.log</span><br><span class="line">storage:</span><br><span class="line">   dbPath: &#x2F;mongodb&#x2F;shard&#x2F;shard2&#x2F;data</span><br><span class="line">net:</span><br><span class="line">  port: 27020</span><br><span class="line">bindIP: 192.168.88.100,127.0.0.1</span><br><span class="line">replication:</span><br><span class="line">   replSetName: &quot;rs2&quot;</span><br><span class="line">sharding:</span><br><span class="line">   clusterRole: shardsvr</span><br></pre></td></tr></table></figure><p>Save and exit.<br><strong>Buka mongodb configuration ‘mongos.conf’.</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim &#x2F;home&#x2F;mongos.conf</span><br></pre></td></tr></table></figure><p>Rubah penempatan log file. Nonaktifkan (beri tanda command) di <strong>storage</strong> dan <strong>replication</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">systemLog:</span><br><span class="line">  destination: file</span><br><span class="line">  logAppend: true</span><br><span class="line">  path: &#x2F;mongodb&#x2F;mongos&#x2F;log&#x2F;mongos.log</span><br><span class="line">net:</span><br><span class="line">  port: 27017</span><br><span class="line">bindIP: 192.168.88.100,127.0.0.1</span><br><span class="line">sharding:</span><br><span class="line">   configDB: rs0&#x2F;192.168.88.100:27018,192.168.88.101:27018,192.168.88.102:27018</span><br></pre></td></tr></table></figure><p>Save and exit.</p><p><strong>Create Folder</strong><br>Berikut, kita harus membuat direktori baru untuk data MongoDB, dan kemudian ganti permisi kepemilikan dari direktori ke user ‘mongod’.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p &#x2F;mongodb&#x2F;mongoconfig&#x2F;log</span><br><span class="line">mkdir -p &#x2F;mongodb&#x2F;mongoconfig&#x2F;data</span><br><span class="line">mkdir -p &#x2F;mongodb&#x2F;shard&#x2F;log</span><br><span class="line">mkdir -p &#x2F;mongodb&#x2F;shard&#x2F;shard1&#x2F;data</span><br><span class="line">mkdir -p &#x2F;mongodb&#x2F;shard&#x2F;shard2&#x2F;data</span><br><span class="line">mkdir -p &#x2F;mongodb&#x2F;mongos&#x2F;log&#x2F;mongos.log</span><br><span class="line">chown -R mongod:mongod &#x2F;mongodb&#x2F;mongoconfig&#x2F;log</span><br><span class="line">chown -R mongod:mongod &#x2F;mongodb&#x2F;mongoconfig&#x2F;data</span><br><span class="line">chown -R mongod:mongod &#x2F;mongodb&#x2F;shard&#x2F;log</span><br><span class="line">chown -R mongod:mongod &#x2F;mongodb&#x2F;shard&#x2F;shard1&#x2F;data</span><br><span class="line">chown -R mongod:mongod &#x2F;mongodb&#x2F;shard&#x2F;shard2&#x2F;data</span><br><span class="line">chown -R mongod:mongod &#x2F;mongodb&#x2F;mongos&#x2F;log&#x2F;mongos.log</span><br></pre></td></tr></table></figure><p>Berikut, mulai service mongod dengan perintah berikut.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mongod --config &#x2F;home&#x2F;mongoconfig.conf</span><br><span class="line">mongod --config &#x2F;home&#x2F;shard1.conf</span><br><span class="line">mongod --config &#x2F;home&#x2F;shard2.conf</span><br><span class="line">mongos --config &#x2F;home&#x2F;mongos.conf</span><br></pre></td></tr></table></figure><p>Anda bisa melihat service mongod sedang berjalan dengan perintah netstat.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">netstat -plntu</span><br></pre></td></tr></table></figure><p><strong>Ulangi langkah ini di semua server</strong></p><p><strong>Step 4 - Initiate member on all mongod</strong></p><p><strong>Menambah Config Server in Replica Set</strong></p><p>Configsvr siap untuk replica set. Connect ke server ‘mongod1’ dan akses ke mongo shell.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ssh root@mongod1</span><br><span class="line">mongo --port 27018</span><br></pre></td></tr></table></figure><p>Initiate nama replica set dengan semua anggota configsvr menggunakan query berikut.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">rs.initiate()</span><br><span class="line">rs.add(&quot;192.168.88.101:27018&quot;)</span><br><span class="line">rs.add(&quot;192.168.88.102:27018&quot;)</span><br></pre></td></tr></table></figure><p>Jika mendapatkan hasil’{ “ok” : 1 }’, itu berarti configsvr telah terkonfigurasi dengan replica set.<br>Initiate nama replica set dengan semua anggota configsvr<br>dan kamu akan dapat melihat yang mana node master dan yang mana node secondary.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rs.status()</span><br></pre></td></tr></table></figure><p>Konfigurasi dari Server Config Replika set telah selesai.</p><p>konfigurasi dari Server Config Replica Set</p><h5 id="Add-Shard-Server-in-Replica-Set"><a href="#Add-Shard-Server-in-Replica-Set" class="headerlink" title="Add Shard Server in Replica Set"></a><strong>Add Shard Server in Replica Set</strong></h5><p>Shard1 and Shard2 telah siap untuk replica set. Connect menuju server <strong>‘mongod1’</strong> dan akses ke mongo shell.</p><figure class="highlight plain"><figcaption><span>--port 27019```</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">Initiate nama replica set dengan semua anggota Shard1 menggunakan query berikut.</span><br></pre></td></tr></table></figure><p>rs.initiate()<br>rs.add(“192.168.88.101:27019”)<br>rs.add(“192.168.88.102:27019”)<br>rs.status()<br>exit</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#96;&#96;&#96;mongo --port 27020</span><br></pre></td></tr></table></figure><p>Initiate nama replica set dengan semua anggota Shard2 menggunakan query berikut.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">rs.initiate()</span><br><span class="line">rs.add(&quot;192.168.88.101:27020&quot;)</span><br><span class="line">rs.add(&quot;192.168.88.102:27020&quot;)</span><br><span class="line">rs.status()</span><br><span class="line">exit</span><br></pre></td></tr></table></figure><p>Jika mendapatkan hasil’{ “ok” : 1 }’, itu berarti Shard telah terkonfigurasi dengan replica set.<br>Initiate nama replica set dengan semua anggota Shards dan kamu akan dapat melihat yang mana node master dan yang mana node secondary.</p><p>Konfigurasi dari server Config telah selesai.</p><p>Konfigurasi dari Server Shard Replica Set</p><h5 id="Tambah-Anggota-Mongos"><a href="#Tambah-Anggota-Mongos" class="headerlink" title="Tambah Anggota Mongos"></a><strong>Tambah Anggota Mongos</strong></h5><p><strong>Konfigurasi mongos/Query Router</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">mongo --port 27017</span><br><span class="line"></span><br><span class="line">sh.addShard( &quot;rs1&#x2F;192.168.88.100:27019,192.168.88.101:27019,192.168.88.102:27019&quot;)</span><br><span class="line">sh.addShard( &quot;rs1&#x2F;192.168.88.100:27020,192.168.88.101:27020,192.168.88.102:27020&quot;)</span><br><span class="line">sh.status()</span><br></pre></td></tr></table></figure><p>MongoDB sharded cluster di CentOS 7 sukses terinstal.</p><p>reff<br><a href="https://www.howtoforge.com/tutorial/install-a-mongodb-sharded-cluster-on-centos-7/" target="_blank" rel="external nofollow noopener noreferrer">Howtoforge</a><br><a href="https://docs.mongodb.com/manual/tutorial/install-mongodb-on-red-hat/" target="_blank" rel="external nofollow noopener noreferrer">MongoDB</a></p>]]></content>
      
      
      <categories>
          
          <category> Install </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MongoDB </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Cara install fail2ban zimbra</title>
      <link href="/how-to-install-fail2ban-zimbra/"/>
      <url>/how-to-install-fail2ban-zimbra/</url>
      
        <content type="html"><![CDATA[<p>Server Mail seperti Zimbra memiliki addon anti-spam tersendiri untuk memblok aktifitas jahat.<br>Fail2ban menyediakan perlindungan tambahan ke server mail.</p><a id="more"></a><p>Server Mail yang bagus selalu melawan spam!<br>Fail2ban dapat dengan mudah ban IP yang mencoba login terlalu banyak.</p><p>Hari ini, ayo diskusi bagaimana Support Engineers kita set up fail2ban untuk Zimbra mail untuk konsumen kita.</p><h2 id="Zimbra-Mail-server-dengan-Fail2ban"><a href="#Zimbra-Mail-server-dengan-Fail2ban" class="headerlink" title="Zimbra Mail server dengan Fail2ban"></a>Zimbra Mail server dengan Fail2ban</h2><p>Zimbra menyediakan server open source dan client software untuk messaging dan collaboration.</p><p>Untuk melindungi mail dari serangan terus menerus kita menggunakan fail2ban. Sebagai tambahan, Fail2ban melindungi server dari serangan paksaan.</p><p>Fail2ban scans file log dan ban IPs yang menunjukkan tanda jahat.</p><p>Ayo diskusi bagaimana Support Engineers kita set up fail2ban untuk Zimbra mail</p><p>Cara setup fail2ban untuk server Zimbra mail<br>Baru saja satu dari konsumen menghubungi kita untuk set up fail2ban untuk server Zimbra Mail. Ayo kita diskusikan cara set up fail2ban untuk konsumen kita.</p><p><strong>Pertama</strong>, kita meyakinkan bahwa fail2ban dan iptables terinstall di server. jika belum kita install fail2ban dan iptables dahulu.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yum install epel-release</span><br><span class="line">yum install fail2ban</span><br></pre></td></tr></table></figure><p>Setelah terinstall, copy file default jail.conf untuk membuat konfigurasi lokal dengan perintah sebagai berikut</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo cp /etc/fail2ban/jail.conf /etc/fail2ban/jail.local</span><br></pre></td></tr></table></figure><p>Kita butuh membuat filter di fail2ban.filter digunakan untuk identifikasi gagal autentifikasi untuk service spesifik.<br>Secara default, ada filter untuk service yang secara umum digunakan terbanyak. jadi secara manual tambahkan filter di <code>/etc/fail2ban/filter.d</code> buat sebuah file dan tambahkan perintah sebagai berikut.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/fail2ban/filter.d/zimbra.conf</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[Definition]</span><br><span class="line">failregex &#x3D; \[ip&#x3D;&lt;HOST&gt;;\] account - authentication failed for .* \(no such account\)$</span><br><span class="line">\[ip&#x3D;&lt;HOST&gt;;\] security - cmd&#x3D;Auth; .* error&#x3D;authentication failed for .*, invalid password;$</span><br><span class="line">;oip&#x3D;&lt;HOST&gt;;.* security - cmd&#x3D;Auth; .* protocol&#x3D;soap; error&#x3D;authentication failed for .* invalid password;$</span><br><span class="line">\[oip&#x3D;&lt;HOST&gt;;.* SoapEngine - handler exception: authentication failed for .*, account not found$</span><br><span class="line">WARN .*;ip&#x3D;&lt;HOST&gt;;ua&#x3D;ZimbraWebClient .* security - cmd&#x3D;AdminAuth; .* error&#x3D;authentication failed for .*;$</span><br><span class="line">NOQUEUE: reject: RCPT from .*\[&lt;HOST&gt;\]: 550 5.1.1 .*: Recipient address rejected:</span><br></pre></td></tr></table></figure><p>Save file nya.</p><p>Sekarang kita tambahkan konten jail untuk Zimbra. Tambahkan detail di jail.conf atau di jail.local berdasarkan konfigurasi. Edit file nya seperti berikut</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/fail2ban/jail.local</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"># This jail forces the backend to &quot;polling&quot;.</span><br><span class="line"></span><br><span class="line">[ssh-iptables]</span><br><span class="line"></span><br><span class="line">enabled &#x3D; false</span><br><span class="line">filter &#x3D; sshd</span><br><span class="line">action &#x3D; iptables[name&#x3D;SSH, port&#x3D;ssh, protocol&#x3D;tcp]</span><br><span class="line">sendmail-whois[name&#x3D;SSH, dest&#x3D;mail@domian.com, sender&#x3D;mail@example.com]</span><br><span class="line">logpath &#x3D; &#x2F;var&#x2F;log&#x2F;messages</span><br><span class="line">maxretry &#x3D; 5</span><br><span class="line"></span><br><span class="line"># jail for Zimbra</span><br><span class="line"></span><br><span class="line">[zimbra-account]</span><br><span class="line">enabled &#x3D; true</span><br><span class="line">filter &#x3D; zimbra</span><br><span class="line">action &#x3D; iptables-allports[name&#x3D;zimbra-account]</span><br><span class="line">sendmail[name&#x3D;zimbra-account, dest&#x3D;mail@example.com]</span><br><span class="line">logpath &#x3D; &#x2F;opt&#x2F;zimbra&#x2F;log&#x2F;mailbox.log</span><br><span class="line">bantime &#x3D; 600</span><br><span class="line">maxretry &#x3D; 5</span><br><span class="line"></span><br><span class="line">[zimbra-audit]</span><br><span class="line">enabled &#x3D; true</span><br><span class="line">filter &#x3D; zimbra</span><br><span class="line">action &#x3D; iptables-allports[name&#x3D;zimbra-audit]</span><br><span class="line">sendmail[name&#x3D;Zimbra-audit, dest&#x3D;mail@example.com]</span><br><span class="line">logpath &#x3D; &#x2F;opt&#x2F;zimbra&#x2F;log&#x2F;audit.log</span><br><span class="line">bantime &#x3D; 600</span><br><span class="line">maxretry &#x3D; 5</span><br><span class="line"></span><br><span class="line">[zimbra-recipient]</span><br><span class="line">enabled &#x3D; true</span><br><span class="line">filter &#x3D; zimbra</span><br><span class="line">action &#x3D; iptables-allports[name&#x3D;zimbra-recipient]</span><br><span class="line">sendmail[name&#x3D;Zimbra-recipient, dest&#x3D;mail@example.com]</span><br><span class="line">logpath &#x3D; &#x2F;var&#x2F;log&#x2F;zimbra.log</span><br><span class="line">bantime &#x3D; 172800</span><br><span class="line">maxretry &#x3D; 5</span><br><span class="line"></span><br><span class="line"># jail for postfix since postfix performs Zimbra mail transfer</span><br><span class="line"></span><br><span class="line">[postfix]</span><br><span class="line">enabled &#x3D; true</span><br><span class="line">filter &#x3D; postfix</span><br><span class="line">action &#x3D; iptables-multiport[name&#x3D;postfix, port&#x3D;smtp, protocol&#x3D;tcp]</span><br><span class="line">sendmail-buffered[name&#x3D;Postfix, dest&#x3D;mail@example.com]</span><br><span class="line">logpath &#x3D; &#x2F;var&#x2F;log&#x2F;zimbra.log</span><br><span class="line">bantime &#x3D; 172800</span><br><span class="line">maxretry &#x3D; 5</span><br></pre></td></tr></table></figure><p>Berikut, ubah konfigurasi Sendmail. edit file /<code>etc/fail2ban/action.d/sendmail.conf</code> dan ubah</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Fail2Ban&quot; | &#x2F;usr&#x2F;sbin&#x2F;sendmail -f &lt;sender&gt; &lt;dest&gt;</span><br></pre></td></tr></table></figure><p>menjadi</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Fail2Ban&quot; | &#x2F;opt&#x2F;zimbra&#x2F;postfix&#x2F;sbin&#x2F;sendmail -f &lt;sender&gt; &lt;dest&gt;</span><br></pre></td></tr></table></figure><p>Akhirnya, restart service Fail2ban.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service fail2ban restart</span><br></pre></td></tr></table></figure><p>Kita menggunakan perintah untuk menemukan detail mengenai ban</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fail2ban-client status zimbra-audit</span><br></pre></td></tr></table></figure><p>Hasil nya tampil seperti berikut<br><img src="https://i.imgur.com/B7fmKzq.png" alt="Imgur"><br>Setelah selesai, sekarang lihat aturan iptable untuk bagian jail yang baru saja di tambahkan di masing-masing modul aplikasi yang di enabled.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo iptables -L</span><br></pre></td></tr></table></figure><p>Berbagai alamat IP yang di ban akan muncul di bagian gagal login. Kamu juga bisa secara manual ban alamat IP dari service dengan perintah sebagai berikut.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo fail2ban-client <span class="built_in">set</span> &lt;jail&gt; banip/unbanip &lt;ip address&gt;</span><br><span class="line"><span class="comment"># Contohnya</span></span><br><span class="line">sudo fail2ban-client <span class="built_in">set</span> sshd unbanip 83.136.253.43</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> HowTo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Zimbra </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Membuat SPF, DMARC and DKIM</title>
      <link href="/howTo-create-SPF-DMARC-and-DKIM/"/>
      <url>/howTo-create-SPF-DMARC-and-DKIM/</url>
      
        <content type="html"><![CDATA[<h3 id="Membuat-SPF-DKIM-and-DMARC"><a href="#Membuat-SPF-DKIM-and-DMARC" class="headerlink" title="Membuat SPF, DKIM and DMARC"></a>Membuat SPF, DKIM and DMARC</h3><p>Ketika menginstall Zimbra Collaboration, kita memerlukan konfigurasi system Security agar dapat mengirim Email, seperti ke Gmail, Hotmail, Yahoo!, dll. Dalam Tutorial ini akan di jelaskan bagaimana memberikan proteksi Email</p><a id="more"></a><p><strong>SPF</strong><br>Sender Policy Framework (SPF) merupakan suatu mekanisme suatu email yang berasal dari domain tertentu hanya bisa dikirim lewat suatu mail server yang ditunjuk. Dengan adanya record ini, maka pengiriman email yang berasal dari domain tertentu hanya diperbolehkan dari mail server yang telah ditentukan. Jika ada email yang berasal dari domain tersebut, tetapi tidak berasal dari mail server yang telah ditentukan, maka email tersebut akan ditolak. Dengan mekanisme ini maka akan mengurangi spam.</p><p><img src="https://i.imgur.com/DxV35be.png" alt="SPF"></p><h3 id="Where-needs-to-be-configured"><a href="#Where-needs-to-be-configured" class="headerlink" title="Where needs to be configured?"></a>Where needs to be configured?</h3><p>SPF diatur dari Public DNS<br><img src="https://i.imgur.com/kb1a0gD.jpg" alt="SPF"><br><strong>Parameter yang digunakan</strong><br><strong>+all</strong> pass semua email, seperti tidak ada yang di konfigurasi.<br><strong>-all</strong> fail Hanya akan menandai email seperti <em>pass</em> jika sumber Server Email cocok, IP, MX, dll dengan entri SPF.<br><strong>~all</strong> softfail Mengizinkan mengirim email, dan jika ada sesuatu yang salah akan menandainya seperti softfail.<br><strong>?all</strong> neutral tanpa perbedaan kebijakan antara ~all dan -all</p><p>Jika domain Anda terkena serangan SPAM mencoba menipu domain Anda, coba ganti SPF menjadi -all for a while, and reset to ~all when the attack ends. Tetap pilih -all jika anda ingin benar-benar ketat dengan entri SPF dan Anda yakin bahwa entri DNS Anda sudah benar.<br>Silahkan di coba hasil konfigurasinya</p><p>Pilih salah satu web di bawah</p><ul><li><a href="http://tools.wordtothewise.com/spf" target="_blank" rel="external nofollow noopener noreferrer">http://tools.wordtothewise.com/spf</a> (akan menampilkan semua IP yang diizinkan yang dapat dikirim menggunakan domain)</li><li><a href="http://www.kitterman.com/spf/validate.html" target="_blank" rel="external nofollow noopener noreferrer">http://www.kitterman.com/spf/validate.html</a> (Sederhana namun efektif, akan menunjukkan entri DNS SPF dan juga hasilnya: pass, softfail, fail, neutral, dll.)</li><li><a href="http://mxtoolbox.com/" target="_blank" rel="external nofollow noopener noreferrer">http://mxtoolbox.com/</a> A Classic</li></ul><p><strong>DKIM</strong><br><strong>DKIM</strong> merupakan kependekan dari DomainKeys Identified Mail, suatu metode untuk melakukan verifikasi email apakah benar-benar dari pengirim atau mengaku sebagai pengirim.<br>Pengirim disini dapat diverifikasi pada level domain. Pada domain ada record tertentu yang berisi suatu public key dan pada server tersebut pasti ada private keynya. Pada setiap pesan yang dikirimkan dari domain tersebut akan ditambahkan suatu text yang dienkrip dari private key tersebut. Text ini ditambahkan pada header email tersebut.<br>Penerima kemudian melakukan decryption dengan menggunakan public_key yang bisa didapatkan pada record DNS tersebut, jika berhasil maka dipastikan bahwa email tersebut benar-benar dari domain tersebut.<br><img src="https://i.imgur.com/V8a6HJm.png" alt="DKIM"><br>Darimana <strong>DKIM</strong> di dapat?<br><strong>DKIM</strong> perlu di generated tiap domain di Zimbra Server, dan di atur di public DNS tiap domain.<br><img src="https://i.imgur.com/PPCNz8q.jpg" alt="DKIM"><br><strong>Menambah DKIM data yang belum ada konfigurasi DKIM</strong></p><figure class="highlight plain"><figcaption><span>-a -d example.com```</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Setelah data di generated,di public DNS record data harus di isi ke DNS server seperti yang di tampilkan:</span><br></pre></td></tr></table></figure><p><a href="mailto:zimbra@example.com" target="_blank" rel="external nofollow noopener noreferrer">zimbra@example.com</a>:~$ /opt/zimbra/libexec/zmdkimkeyutil -a -d example.com<br>DKIM Data added to LDAP for domain example.com with selector 0E9F184A-9577-11E1-AD0E-2A2FBBAC6BCB<br>Public key to enter into DNS:<br>0E9F184A-9577-11E1-AD0E-2A2FBBAC6BCB._domainkey IN TXT “v=DKIM1;=rsa;<br>p=MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDY5CBg15nZ2vYnRmrNub6Jn6ghQ2DXQbQgOJ/E5IGziUYEuE2OnxkBm1h3jived21uHjpNy0naOZjLj0xLyyjclVy1chrhSbsGAhe8HLXUsdXyfRvNTq8NWLsUnMEsoomtJCJ<br>/6LYWYU1whOQ9oKZVAwWHSovAWZpByqNMZmFg7QIDAQAB” ; —– DKIM 0E9F184A-9577-11E1-AD0E-2A2FBBAC6BCB for example.com</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">**Update DKIM data jika sudah ada **</span><br><span class="line">&#96;&#96;&#96;&#x2F;opt&#x2F;zimbra&#x2F;libexec&#x2F;zmdkimkeyutil -u -d example.com</span><br></pre></td></tr></table></figure><p>Ketika DKIM diperbarui, server DNS harus dimuat ulang dengan catatan TXT baru. Disarankan untuk membuang TXT sebelumnya di DNS.<br><strong>Menghapus DKIM data dari domain</strong></p><figure class="highlight plain"><figcaption><span>-r -d example.com```</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Command ini untuk menghapus **DKIM** data dari **LDAP**. Email baru tidak akan di tandai dalam **DKIM**. The DNS TXT record should remain for a period of time to allow verification of emails signed with this key.</span><br><span class="line"></span><br><span class="line">**Melihat DKIM data**</span><br><span class="line">&#96;&#96;&#96;&#x2F;opt&#x2F;zimbra&#x2F;libexec&#x2F;zmdkimkeyutil -q -d example.com</span><br></pre></td></tr></table></figure><p>This command will output all the stored DKIM information, specifically</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">DKIM Domain</span><br><span class="line">DKIM Selector</span><br><span class="line">DKIM Private Key</span><br><span class="line">DKIM Public Signature</span><br><span class="line">DKIM Identity</span><br></pre></td></tr></table></figure><p><img src="https://i.imgur.com/Z2Gcamo.png" alt="Hasil"></p><p><strong>Mengecek validasi DKIM</strong><br><a href="http://dkimcore.org/tools/keycheck.html" target="_blank" rel="external nofollow noopener noreferrer">http://dkimcore.org/tools/keycheck.html</a></p><p><img src="https://i.imgur.com/gxXSlFw.jpg" alt="Check"><br>After a few seconds you will see the result:<br><img src="https://i.imgur.com/TIBLrh1.jpg" alt="Imgur"></p><h3 id="DMARC"><a href="#DMARC" class="headerlink" title="DMARC"></a>DMARC</h3><p><strong>DMARC</strong>, kependekan dari “Domain-based Message Authentication, Reporting &amp; Conformance”, adalah sistem yang menyediakan arahan atau informasi apabila email tidak terautentikasi.<br><img src="https://i.imgur.com/gaI4ld4.png" alt="DMARC"></p><p><strong>Konfigurasi DMARC</strong><br>DMARC record bisa di generated dari website, sebagai contoh <a href="http://www.kitterman.com/dmarc/assistant.html" target="_blank" rel="external nofollow noopener noreferrer">http://www.kitterman.com/dmarc/assistant.html</a></p><p><img src="https://i.imgur.com/0HjU2r0.png" alt="DMARC"><br>Konfigurasi tersebut akan meng-generate untuk isi DNS<br>DMARC record untuk: example.com</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Record diisi dengan _dmarc.example.com</span><br><span class="line">v&#x3D;DMARC1; p&#x3D;quarantine; rua&#x3D;dmarc@example.com; ruf&#x3D;dmarc@example.com; sp&#x3D;quarantine</span><br></pre></td></tr></table></figure><p>Dan di Public DNS isi seperti ini:</p><p><img src="https://i.imgur.com/T0zHAGQ.png" alt="DMARC"></p><h3 id="Test-DMARC"><a href="#Test-DMARC" class="headerlink" title="Test DMARC"></a>Test DMARC</h3><p>Salah satu situs untuk cek DMARC adalah - <code>https://dmarcian.com/dmarc-inspector/google.com</code> dengan domain google.com. Website ini akan menunjukkan informasi DMARC domain Anda.</p>]]></content>
      
      
      <categories>
          
          <category> HowTo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Zimbra </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
