<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="generator" content="Hexo 4.2.0"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><title>Install OpsManager MongoDb - Tutorial</title><meta name="description" content="Ops Manager is an incredible tool provided by MongoDB. You need to get a licence to use it in Production but the benefits clearly worth it (more info on mongodb.com).You can see it as a dashboard open"><meta property="og:type" content="article"><meta property="og:title" content="Install OpsManager MongoDb"><meta property="og:url" content="https://tutorial.getmedik.co.id/install-ops-manager/index.html"><meta property="og:site_name" content="Tutorial"><meta property="og:description" content="Ops Manager is an incredible tool provided by MongoDB. You need to get a licence to use it in Production but the benefits clearly worth it (more info on mongodb.com).You can see it as a dashboard open"><meta property="og:locale" content="en_US"><meta property="og:image" content="https://tutorial.getmedik.co.id/images/og_image.png"><meta property="article:published_time" content="2020-01-07T11:18:05.246Z"><meta property="article:modified_time" content="2020-01-08T05:50:39.091Z"><meta property="article:author" content="Harry"><meta property="article:tag" content="MongoDB"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://tutorial.getmedik.co.id/images/og_image.png"><link rel="icon" href="//cdn.jsdelivr.net/gh/harryarifin79/tutorial@gh-pages/images/favicon.svg"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.7.2/css/bulma.css"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.4.1/css/all.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Ubuntu:400,600|Source+Code+Pro"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/outdatedbrowser@1.1.5/outdatedbrowser/outdatedbrowser.min.css"><link rel="stylesheet" href="//cdn.jsdelivr.net/gh/harryarifin79/tutorial@gh-pages/css/back-to-top.css"><link rel="stylesheet" href="//cdn.jsdelivr.net/gh/harryarifin79/tutorial@gh-pages/css/progressbar.css"><script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script><link rel="stylesheet" href="//cdn.jsdelivr.net/gh/harryarifin79/tutorial@gh-pages/css/style.css"></head><body class="is-3-column"><nav class="navbar navbar-main"><div class="container"><div class="navbar-brand is-flex-center"><a class="navbar-item navbar-logo" href="/"><img src="//cdn.jsdelivr.net/gh/harryarifin79/tutorial@gh-pages/images/logo.svg" alt="Install OpsManager MongoDb" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a> <a class="navbar-item" href="/archives">Archives</a> <a class="navbar-item" href="/categories">Categories</a> <a class="navbar-item" href="/tags">Tags</a> <a class="navbar-item" href="/about">About</a></div><div class="navbar-end"><a class="navbar-item search" title="Search" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column is-8-tablet is-8-desktop is-6-widescreen has-order-2 column-main"><div class="card"><div class="card-content article"><div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto"><div class="level-left"><time class="level-item has-text-grey" datetime="2020-01-07T11:18:05.246Z">2020-01-07</time><div class="level-item"><a class="has-link-grey -link" href="/categories/Install/">Install</a></div><span class="level-item has-text-grey">11 minutes read (About 1610 words)</span></div></div><h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">Install OpsManager MongoDb</h1><div class="content"><p><strong>Ops Manager</strong> is an incredible tool provided by MongoDB. You need to get a licence to use it in Production but the benefits clearly worth it (more info on mongodb.com).</p><p>You can see it as a dashboard opened to anyone inside your organization, where you can completely manage and automate your MongoDB instances, replica and sharding sets as well as giving many live insights about the usage and the data.</p><hr><a id="more"></a><p>To go further: Architecture, Configuration, Example Deployment Topologies.</p><p>Content:</p><ul><li>Installation</li><li>Simple test deployment on CentOS</li><li>Automation Agent</li><li>Configuration</li><li>Appendix</li><li>Installation</li></ul><p>Simple test deployment on CentOS (docs.opsmanager.mongodb.com)<br>This is an interesting first step and can be used for non-production environments (dev, staging). You can validate many aspects about the procedure, such as the ports to be opened and OS options.</p><p>All Ops Manager components will run on the same server: db, backup, application.</p><p>MongoDB needs to be first installed and configured to host Ops Manager data &amp; backup.</p><p>Pre-requisites (hosts, ntpupdate, mongod, firewall)<br>:warning: Make sure to correctly update either your DNS or the /etc/hosts file of every server, a small typo can lead to complicated investigation (true story).</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"># make sure ntp &amp; ntpupdate are installed (this is important for the communication between servers)</span><br><span class="line">sudo yum install ntpupdate</span><br><span class="line">sudo ntpdate 0.centos.pool.ntp.org</span><br><span class="line"># install MongoDB server &amp; shell</span><br><span class="line">echo &quot;[mongodb-org-4.2]</span><br><span class="line">name&#x3D;MongoDB Repository</span><br><span class="line">baseurl&#x3D;https:&#x2F;&#x2F;repo.mongodb.org&#x2F;yum&#x2F;redhat&#x2F;$releasever&#x2F;mongodb-org&#x2F;4.2&#x2F;x86_64&#x2F;</span><br><span class="line">gpgcheck&#x3D;1</span><br><span class="line">enabled&#x3D;1</span><br><span class="line">gpgkey&#x3D;https:&#x2F;&#x2F;www.mongodb.org&#x2F;static&#x2F;pgp&#x2F;server-4.2.asc&quot; | sudo tee &#x2F;etc&#x2F;yum.repos.d&#x2F;mongodb.repo</span><br><span class="line">sudo yum install -y mongodb-org mongodb-org-shell</span><br><span class="line"># for info: user mongod and group mongod have been created (you can add your user in mongod group)</span><br><span class="line">cat &#x2F;etc&#x2F;passwd</span><br><span class="line">cat &#x2F;etc&#x2F;group</span><br><span class="line"># service mongod is launched by default, stop it and prevent it from being started on server startup</span><br><span class="line">service mongod status</span><br><span class="line">sudo service mongod stop</span><br><span class="line">sudo chkconfig --level 35 mongod off</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># create the directories for mongod: application database, backup, logs</span><br><span class="line">sudo mkdir -p &#x2F;data&#x2F;mongodb&#x2F;opsmanager&#x2F;appdb</span><br><span class="line">sudo chown -R mongod:mongod &#x2F;data&#x2F;mongodb&#x2F;opsmanager&#x2F;appdb</span><br><span class="line">sudo chmod 770 -R &#x2F;data&#x2F;mongodb&#x2F;opsmanager&#x2F;appdb</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># open Ops Manager ports</span><br><span class="line">sudo firewall-cmd --permanent --zone&#x3D;public --add-port&#x3D;8080&#x2F;tcp</span><br><span class="line">sudo firewall-cmd --permanent --zone&#x3D;public --add-port&#x3D;8443&#x2F;tcp</span><br><span class="line">sudo firewall-cmd --permanent --zone&#x3D;public --add-port&#x3D;27000-28000&#x2F;tcp</span><br><span class="line">sudo firewall-cmd --permanent --zone&#x3D;public --add-port&#x3D;25&#x2F;tcp</span><br><span class="line">sudo firewall-cmd --reload</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Configure &amp; launch MongoDB databases for Ops Manager (app &amp; backup)</span><br><span class="line"># path will depend on your directory strategy, cache size from your server capacity</span><br><span class="line">sudo -u mongod mongod --port 27017 --dbpath &#x2F;data&#x2F;mongodb&#x2F;opsmanager&#x2F;appdb --logpath &#x2F;data&#x2F;mongodb&#x2F;opsmanager&#x2F;logs&#x2F;appdb.log --wiredTigerCacheSizeGB 1 --fork</span><br><span class="line">sudo -u mongod mongod --port 27018 --dbpath &#x2F;data&#x2F;mongodb&#x2F;opsmanager&#x2F;backup --logpath &#x2F;data&#x2F;mongodb&#x2F;opsmanager&#x2F;logs&#x2F;backup.log  --fork</span><br><span class="line"># you can check they are up and running</span><br><span class="line">ps -ef | grep mongod</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">Download and install Ops Manager (previously known as MongoDB Monitoring Service, aka MMS)</span><br><span class="line">Go to mongodb download page.</span><br><span class="line">Select the version (latest stable one in my case) and copy RPM URL,</span><br><span class="line">For example: https:&#x2F;&#x2F;downloads.mongodb.com&#x2F;on-prem-mms&#x2F;rpm&#x2F;mongodb-mms-4.2.5.56761.20191211T0141Z-1.x86_64.rpm.</span><br><span class="line"># retrieve and install the selected version</span><br><span class="line">curl -OL https:&#x2F;&#x2F;downloads.mongodb.com&#x2F;on-prem-mms&#x2F;rpm&#x2F;mongodb-mms-4.2.5.56761.20191211T0141Z-1.x86_64.rpm</span><br><span class="line">sudo rpm -ivh mongodb-mms-3.6.3.606-1.x86_64.rpm</span><br><span class="line"></span><br><span class="line"># ll &#x2F;opt&#x2F;mongodb&#x2F;mms</span><br><span class="line"># mongodb-mms user and group have been created</span><br><span class="line">cat &#x2F;etc&#x2F;passwd</span><br><span class="line">cat &#x2F;etc&#x2F;group</span><br><span class="line"># edit &amp; review properties file (contains the connection string to app db)</span><br><span class="line">sudo vi &#x2F;opt&#x2F;mongodb&#x2F;mms&#x2F;conf&#x2F;conf-mms.properties</span><br><span class="line"># start Ops Manager!</span><br><span class="line">sudo service mongodb-mms start</span><br><span class="line"># Generating new Ops Manager private key...</span><br><span class="line"># Starting pre-flight checks</span><br><span class="line"># Successfully finished pre-flight checks</span><br><span class="line"># Migrate Ops Manager data</span><br><span class="line">#    Running migrations...[  OK  ]</span><br><span class="line"># Start Ops Manager server</span><br><span class="line">#    Instance 0 starting...............[  OK  ]</span><br><span class="line"># Starting pre-flight checks</span><br><span class="line"># Successfully finished pre-flight checks</span><br><span class="line"># Start Backup Daemon...[  OK  ]</span><br><span class="line">Open the Ops Manager URL in a browser: http:&#x2F;&#x2F;&lt;opsManagerHost&gt;:8080</span><br><span class="line">Click on Register then fill and submit the form, follow the guide for the basic configuration (that can be easily edited after)</span><br><span class="line">You should land in the Ops manager page!</span><br></pre></td></tr></table></figure><p><strong>Automation agent</strong><br>Ops Manager can automate all your MongoDB instances and servers thanks to the Automation Agent that must be installed on all servers.</p><p>CentOS (tutorial from mongodb.com)<br>This procedure has been validated against CentOS Linux release 7.4.1708 (Core)</p><p>Log in the server<br><strong>make sure ntp &amp; ntpupdate are installed</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo yum install ntpupdate</span><br><span class="line">sudo ntpdate 0.centos.pool.ntp.org</span><br></pre></td></tr></table></figure><p><strong>ports should not be used and firewall allows traffic on these ports between the servers</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sudo firewall-cmd --permanent --zone&#x3D;public --add-port&#x3D;8080&#x2F;tcp</span><br><span class="line">sudo firewall-cmd --permanent --zone&#x3D;public --add-port&#x3D;8443&#x2F;tcp</span><br><span class="line">sudo firewall-cmd --permanent --zone&#x3D;public --add-port&#x3D;27000-28000&#x2F;tcp</span><br><span class="line">sudo firewall-cmd --reload</span><br></pre></td></tr></table></figure><p><strong>make sure all URLS are known</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo vi &#x2F;etc&#x2F;hosts</span><br></pre></td></tr></table></figure><p><strong>for example on Ops Manager URL</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -ivs http:&#x2F;&#x2F;myopsmanagerurl:8080</span><br></pre></td></tr></table></figure><p><strong>download the package file from Ops Manager and install it</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">curl -OL http:&#x2F;&#x2F;myopsmanagerurl:8080&#x2F;download&#x2F;agent&#x2F;automation&#x2F;mongodb-mms-automation-agent-manager-10.2.10.5921-1.x86_64.rhel7.rpm</span><br><span class="line">sudo rpm -U mongodb-mms-automation-agent-manager-10.2.10.5921-1.x86_64.rhel7.rpm</span><br></pre></td></tr></table></figure><p><strong>follow the comments to fill mmsGroupId, mmsApiKey, mmsBaseUrl</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo vi &#x2F;etc&#x2F;mongodb-mms&#x2F;automation-agent.config</span><br></pre></td></tr></table></figure><p><strong>create data directory</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo mkdir &#x2F;data</span><br><span class="line">sudo chown mongod:mongod &#x2F;data</span><br></pre></td></tr></table></figure><p><strong>start the automation agent</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo service mongodb-mms-automation-agent start</span><br></pre></td></tr></table></figure><p><strong>check its status</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo service mongodb-mms-automation-agent status</span><br></pre></td></tr></table></figure><p><strong>investigate issues</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ll &#x2F;var&#x2F;log&#x2F;mongodb-mms-automation</span><br><span class="line">sudo more &#x2F;var&#x2F;log&#x2F;mongodb-mms-automation&#x2F;automation-agent-fatal.log</span><br></pre></td></tr></table></figure><p>You should now be able to see your node in Ops Manager &gt; Deployment &gt; Agents</p><p>Known issues</p><p>libsasl2.so.2: cannot open shared object file: No such file or directory</p><p>/opt/mongodb-mms-automation/bin/mongodb-mms-automation-agent: error while loading shared libraries: libsasl2.so.2: cannot open shared object file: No such file or directory</p><p>Fix:</p><p>cd /lib64<br>sudo ln -s libsasl2.so.3.0.0 libsasl2.so.2<br>SocketException: Address already in use</p><p>E STORAGE [initandlisten] Failed to set up listener: SocketException: Address already in use<br>I CONTROL [initandlisten] now exiting<br>I CONTROL [initandlisten] shutting down with code:48</p><p>Fix:</p><p><strong>look at the process using the port</strong><br>sudo netstat -tulpn | grep :27000<br>sudo kill processid<br>Ubuntu (tutorial from mongodb.com)<br>Updates made from docs.cloudmanager.mongodb.com.</p><p>This procedure has been validated against Ubuntu 16.04.1 LTS</p><p>Configuration<br>Monitoring<br>Once the servers have configured and seen by Ops Manager, you should install at least one monitoring agent on one node.<br>Backup<br>Make sure a back agent is installed on a server (easy to install from the server view).</p><p>Create a directory to store the head databases</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mkdir &#x2F;data&#x2F;mongodb&#x2F;backupdaemon</span><br><span class="line">sudo chown mongodb-mms:mongodb-mms &#x2F;data&#x2F;mongodb&#x2F;backupdaemon</span><br><span class="line">sudo sudo chmod 774 -R &#x2F;data&#x2F;mongodb&#x2F;backupdaemon</span><br></pre></td></tr></table></figure><p>In Ops Manager, click on Admin in the top right &gt; Backup tab. Follow the prompts to configure the Backup storage. You can go with the storage in MongoDB and fill the connection with localhost:27018.</p><p>In Ops Manager, click on Backup at the left and create a new entry.</p><p>Email sending<br>If you have an error while sending the test message, you can test directly from Ops Manager server.</p><p>sudo yum install telnet<br>telnet smtp.mycompany.lan 25</p><p>Appendix<br>Follow what’s going on!<br>You can tail the automataion log file.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">tail -f &#x2F;var&#x2F;log&#x2F;mongodb-mms-automation&#x2F;automation-agent.log</span><br><span class="line">You can also look at the processes running on a MongoDB server.</span><br><span class="line"></span><br><span class="line">ps -ef | grep mongo</span><br><span class="line"># mongod    23947      1  0 14:15 ?        00:00:03 &#x2F;var&#x2F;lib&#x2F;mongodb-mms-automation&#x2F;mongodb-linux-x86_64-3.6.2&#x2F;bin&#x2F;mongod -f &#x2F;data&#x2F;rsDev2_12&#x2F;automation-mongod.conf</span><br><span class="line">sudo more &#x2F;data&#x2F;rsDev2_12&#x2F;automation-mongod.conf</span><br><span class="line"># THIS FILE IS MAINTAINED BY http:&#x2F;&#x2F;myopsmanager:8080 . DO NOT MODIFY AS IT WILL BE OVERWRITTEN.</span><br><span class="line"># To make changes to your MongoDB deployment, please visit http:&#x2F;&#x2F;myopsmanager:8080 . Your Group ID is xxxxxxxxxxxxxxxxxxxxx .</span><br><span class="line">net:</span><br><span class="line">  bindIp: 0.0.0.0</span><br><span class="line">  port: 27000</span><br><span class="line">processManagement:</span><br><span class="line">  fork: &quot;true&quot;</span><br><span class="line">replication:</span><br><span class="line">  replSetName: rsDev2</span><br><span class="line">storage:</span><br><span class="line">  dbPath: &#x2F;data&#x2F;rsDev2_12</span><br><span class="line">systemLog:</span><br><span class="line">  destination: file</span><br><span class="line">  path: &#x2F;data&#x2F;rsDev2_12&#x2F;mongodb.log</span><br><span class="line">sudo tail -f &#x2F;data&#x2F;rsDev2_12&#x2F;mongodb.log</span><br><span class="line">Cleanup a MongoDB server</span><br><span class="line">In case of issues, you may want to clean a server where a MongoDB automation agent was installed, or simply a MongoDB server.</span><br></pre></td></tr></table></figure><p><strong>Remove MongoDB server</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">MongoDB files are located here: &#x2F;var&#x2F;lib&#x2F;mongodb, &#x2F;var&#x2F;log&#x2F;mongodb.</span><br><span class="line"></span><br><span class="line">sudo systemctl stop mongod.service</span><br><span class="line">sudo systemctl disable mongod.service</span><br><span class="line">sudo dpkg -P mongod</span><br><span class="line">sudo systemctl daemon-reload</span><br><span class="line">sudo systemctl reset-failed</span><br><span class="line">sudo apt-get clean</span><br><span class="line">Remove an automation agent</span><br><span class="line"></span><br><span class="line">MongoDB files are located here: &#x2F;var&#x2F;lib&#x2F;mongodb-mms-automation, &#x2F;var&#x2F;log&#x2F;mongodb-mms-automation.</span><br><span class="line"></span><br><span class="line">sudo systemctl stop mongodb-mms-automation-agent</span><br><span class="line">sudo dpkg -P mongodb-mms-automation-agent-manager</span><br><span class="line">sudo rm -rf &#x2F;etc&#x2F;mongodb-mms</span><br><span class="line">sudo rm -rf &#x2F;var&#x2F;lib&#x2F;mongodb-mms-automation</span><br><span class="line">sudo rm -rf &#x2F;var&#x2F;log&#x2F;mongodb-mms-automation</span><br><span class="line">Wait for 5 minutes so Ops manager consider the agent as down.</span><br></pre></td></tr></table></figure><p>Warnings<br>If you followed this procedure, you will probably get this warnings.</p><p>Access control is not enabled for the database</p><p>WARNING: Access control is not enabled for the database.<br>Read and write access to data and configuration is unrestricted.</p><p>_This server is bound to localhost</p><p>WARNING: This server is bound to localhost.<br>Remote systems will be unable to connect to this server.<br>Start the server with –bind_ip</p><address>to specify which IP<br>addresses it should serve responses from, or with –bind_ip_all to<br>bind to all interfaces. If this behavior is desired, start the<br>server with –bind_ip 127.0.0.1 to disable this warning.<p></p><p>/sys/kernel/mm/transparent_hugepage/enabled is ‘always’</p><p>WARNING: /sys/kernel/mm/transparent_hugepage/enabled is ‘always’.<br>We suggest setting it to ‘never’</p><p>Using the XFS filesystem is strongly recommended with the WiredTiger storage engine</p><p>WARNING: Using the XFS filesystem is strongly recommended with the WiredTiger storage engine,<br>See <a href="http://dochub.mongodb.org/core/prodnotes-filesystem" target="_blank" target="_blank" target="_blank" target="_blank" rel="external nofollow noopener noreferrer">http://dochub.mongodb.org/core/prodnotes-filesystem</a>,</p><p>You can review the different mount drives by executing: sudo df -hT.</p></address></div><div class="level is-size-7 is-uppercase"><div class="level-start"><div class="level-item"><span class="is-size-6 has-text-grey has-mr-7">#</span> <a class="has-link-grey -link" href="/tags/MongoDB/" rel="tag">MongoDB</a></div></div></div></div></div><div class="card card-transparent"><div class="level post-navigation is-flex-wrap is-mobile"><div class="level-end"><a class="level level-item has-link-grey article-nav-next" href="/install-zimbra/"><span class="level-item">Install Zimbra Mail Server</span> <i class="level-item fas fa-chevron-right"></i></a></div></div></div></div><div class="column is-4-tablet is-4-desktop is-3-widescreen has-order-1 column-left"><div class="card widget"><div class="card-content"><nav class="level"><div class="level-item has-text-centered" style="flex-shrink:1"><div><figure class="image is-128x128 has-mb-6"><img class="is-rounded" src="//cdn.jsdelivr.net/gh/harryarifin79/tutorial@gh-pages/images/avatar.png" alt="GetMedik"></figure><p class="is-size-4 is-block">GetMedik</p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">Posts</p><a href="/archives"><p class="title has-text-weight-normal">3</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Category</p><a href="/categories"><p class="title has-text-weight-normal">1</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Tags</p><a href="/tags"><p class="title has-text-weight-normal">2</p></a></div></div></nav><div class="level"><a class="level-item button is-link is-rounded" href="https://tutorial.getmedik.co.id" target="_blank" rel="noopener">Follow</a></div></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">Links</h3><ul class="menu-list"><li><a class="level is-mobile" href="https://tutorial.getmedik.co.id" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Tutorial</span> </span><span class="level-right"><span class="level-item tag">tutorial.getmedik.co.id</span></span></a></li><li><a class="level is-mobile" href="http://getmedik.co.id" target="_blank" target="_blank" target="_blank" target="_blank" rel="noopener external nofollow noopener noreferrer"><span class="level-left"><span class="level-item">GetMedik</span> </span><span class="level-right"><span class="level-item tag">getmedik.co.id</span></span></a></li></ul></div></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">Categories</h3><ul class="menu-list"><li><a class="level is-marginless" href="/categories/Install/"><span class="level-start"><span class="level-item">Install</span> </span><span class="level-end"><span class="level-item tag">3</span></span></a></li></ul></div></div></div><div class="card widget"><div class="card-content"><h3 class="menu-label">Tag Cloud</h3><a href="/tags/MongoDB/" style="font-size:20px">MongoDB</a> <a href="/tags/Zimbra/" style="font-size:10px">Zimbra</a></div></div><div class="column-right-shadow is-hidden-widescreen"><div class="card widget"><div class="card-content"><h3 class="menu-label">Recent</h3><article class="media"><a href="/install-ops-manager/" class="media-left"><p class="image is-64x64"><img class="thumbnail" src="//cdn.jsdelivr.net/gh/harryarifin79/tutorial@gh-pages/images/thumbnail.svg" alt="Install OpsManager MongoDb"></p></a><div class="media-content"><div class="content"><div><time class="has-text-grey is-size-7 is-uppercase" datetime="2020-01-07T11:18:05.246Z">2020-01-07</time></div><a href="/install-ops-manager/" class="title has-link-black-ter is-size-6 has-text-weight-normal">Install OpsManager MongoDb</a><p class="is-size-7 is-uppercase"><a class="has-link-grey -link" href="/categories/Install/">Install</a></p></div></div></article><article class="media"><a href="/install-zimbra/" class="media-left"><p class="image is-64x64"><img class="thumbnail" src="//cdn.jsdelivr.net/gh/harryarifin79/tutorial@gh-pages/images/thumbnail.svg" alt="Install Zimbra Mail Server"></p></a><div class="media-content"><div class="content"><div><time class="has-text-grey is-size-7 is-uppercase" datetime="2020-01-03T09:10:07.852Z">2020-01-03</time></div><a href="/install-zimbra/" class="title has-link-black-ter is-size-6 has-text-weight-normal">Install Zimbra Mail Server</a><p class="is-size-7 is-uppercase"><a class="has-link-grey -link" href="/categories/Install/">Install</a></p></div></div></article><article class="media"><a href="/install-mongodb-cluster/" class="media-left"><p class="image is-64x64"><img class="thumbnail" src="//cdn.jsdelivr.net/gh/harryarifin79/tutorial@gh-pages/images/thumbnail.svg" alt="Install MongoDB Cluster"></p></a><div class="media-content"><div class="content"><div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-12-24T05:35:54.669Z">2019-12-24</time></div><a href="/install-mongodb-cluster/" class="title has-link-black-ter is-size-6 has-text-weight-normal">Install MongoDB Cluster</a><p class="is-size-7 is-uppercase"><a class="has-link-grey -link" href="/categories/Install/">Install</a></p></div></div></article></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">Archives</h3><ul class="menu-list"><li><a class="level is-marginless" href="/archives/2020/01/"><span class="level-start"><span class="level-item">January 2020</span> </span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-marginless" href="/archives/2019/12/"><span class="level-start"><span class="level-item">December 2019</span> </span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></div></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">Tags</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/MongoDB/"><span class="tag">MongoDB</span> <span class="tag is-grey">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Zimbra/"><span class="tag">Zimbra</span> <span class="tag is-grey">1</span></a></div></div></div></div></div></div></div><div class="column is-4-tablet is-4-desktop is-3-widescreen is-hidden-touch is-hidden-desktop-only has-order-3 column-right"><div class="card widget"><div class="card-content"><h3 class="menu-label">Recent</h3><article class="media"><a href="/install-ops-manager/" class="media-left"><p class="image is-64x64"><img class="thumbnail" src="//cdn.jsdelivr.net/gh/harryarifin79/tutorial@gh-pages/images/thumbnail.svg" alt="Install OpsManager MongoDb"></p></a><div class="media-content"><div class="content"><div><time class="has-text-grey is-size-7 is-uppercase" datetime="2020-01-07T11:18:05.246Z">2020-01-07</time></div><a href="/install-ops-manager/" class="title has-link-black-ter is-size-6 has-text-weight-normal">Install OpsManager MongoDb</a><p class="is-size-7 is-uppercase"><a class="has-link-grey -link" href="/categories/Install/">Install</a></p></div></div></article><article class="media"><a href="/install-zimbra/" class="media-left"><p class="image is-64x64"><img class="thumbnail" src="//cdn.jsdelivr.net/gh/harryarifin79/tutorial@gh-pages/images/thumbnail.svg" alt="Install Zimbra Mail Server"></p></a><div class="media-content"><div class="content"><div><time class="has-text-grey is-size-7 is-uppercase" datetime="2020-01-03T09:10:07.852Z">2020-01-03</time></div><a href="/install-zimbra/" class="title has-link-black-ter is-size-6 has-text-weight-normal">Install Zimbra Mail Server</a><p class="is-size-7 is-uppercase"><a class="has-link-grey -link" href="/categories/Install/">Install</a></p></div></div></article><article class="media"><a href="/install-mongodb-cluster/" class="media-left"><p class="image is-64x64"><img class="thumbnail" src="//cdn.jsdelivr.net/gh/harryarifin79/tutorial@gh-pages/images/thumbnail.svg" alt="Install MongoDB Cluster"></p></a><div class="media-content"><div class="content"><div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-12-24T05:35:54.669Z">2019-12-24</time></div><a href="/install-mongodb-cluster/" class="title has-link-black-ter is-size-6 has-text-weight-normal">Install MongoDB Cluster</a><p class="is-size-7 is-uppercase"><a class="has-link-grey -link" href="/categories/Install/">Install</a></p></div></div></article></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">Archives</h3><ul class="menu-list"><li><a class="level is-marginless" href="/archives/2020/01/"><span class="level-start"><span class="level-item">January 2020</span> </span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-marginless" href="/archives/2019/12/"><span class="level-start"><span class="level-item">December 2019</span> </span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></div></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">Tags</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/MongoDB/"><span class="tag">MongoDB</span> <span class="tag is-grey">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Zimbra/"><span class="tag">Zimbra</span> <span class="tag is-grey">1</span></a></div></div></div></div></div></div></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start has-text-centered-mobile"><a class="footer-logo is-block has-mb-6" href="/"><img src="//cdn.jsdelivr.net/gh/harryarifin79/tutorial@gh-pages/images/logo.svg" alt="Install OpsManager MongoDb" height="28"></a><p class="is-size-7">&copy; 2020 Harry&nbsp; Powered by <a href="https://hexo.io/" target="_blank" target="_blank" target="_blank" rel="noopener external nofollow noopener noreferrer">Hexo</a> & <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" target="_blank" target="_blank" rel="noopener external nofollow noopener noreferrer">Icarus</a></p></div><div class="level-end"></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script>moment.locale("en")</script><script>var IcarusThemeSettings={site:{url:"https://tutorial.getmedik.co.id",external_link:{enable:!0,exclude:[]}},article:{highlight:{clipboard:!0,fold:"unfolded"}}}</script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script src="//cdn.jsdelivr.net/gh/harryarifin79/tutorial@gh-pages/js/animation.js"></script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script><script src="//cdn.jsdelivr.net/gh/harryarifin79/tutorial@gh-pages/js/gallery.js" defer></script><div id="outdated"><h6>Your browser is out-of-date!</h6><p>Update your browser to view this website correctly. <a id="btnUpdateBrowser" href="http://outdatedbrowser.com/" target="_blank" target="_blank" target="_blank" rel="external nofollow noopener noreferrer">Update my browser now</a></p><p class="last"><a href="#" id="btnCloseUpdateBrowser" title="Close">&times;</a></p></div><script src="https://cdn.jsdelivr.net/npm/outdatedbrowser@1.1.5/outdatedbrowser/outdatedbrowser.min.js" defer></script><script>document.addEventListener("DOMContentLoaded",function(){outdatedBrowser({bgColor:"#f25648",color:"#ffffff",lowerThan:"flex"})})</script><script src="https://cdn.jsdelivr.net/npm/mathjax@2.7.5/unpacked/MathJax.js?config=TeX-MML-AM_CHTML" defer></script><script>document.addEventListener("DOMContentLoaded",function(){MathJax.Hub.Config({"HTML-CSS":{matchFontHeight:!1},SVG:{matchFontHeight:!1},CommonHTML:{matchFontHeight:!1},tex2jax:{inlineMath:[["$","$"],["\\(","\\)"]]}})})</script><a id="back-to-top" title="Back to Top" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="//cdn.jsdelivr.net/gh/harryarifin79/tutorial@gh-pages/js/back-to-top.js" defer></script><script src="//cdn.jsdelivr.net/gh/harryarifin79/tutorial@gh-pages/js/main.js" defer></script><div class="searchbox ins-search"><div class="searchbox-container ins-search-container"><div class="searchbox-input-wrapper"><input type="text" class="searchbox-input ins-search-input" placeholder="Type something..."> <span class="searchbox-close ins-close ins-selectable"><i class="fa fa-times-circle"></i></span></div><div class="searchbox-result-wrapper ins-section-wrapper"><div class="ins-section-container"></div></div></div></div><script>window.INSIGHT_CONFIG={TRANSLATION:{POSTS:"Posts",PAGES:"Pages",CATEGORIES:"Categories",TAGS:"Tags",UNTITLED:"(Untitled)"},CONTENT_URL:"/content.json"}</script><script src="//cdn.jsdelivr.net/gh/harryarifin79/tutorial@gh-pages/js/insight.js" defer></script><link rel="stylesheet" href="//cdn.jsdelivr.net/gh/harryarifin79/tutorial@gh-pages/css/search.css"><link rel="stylesheet" href="//cdn.jsdelivr.net/gh/harryarifin79/tutorial@gh-pages/css/insight.css"></body></html>